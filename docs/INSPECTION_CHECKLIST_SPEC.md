# 車検チェックリスト機能仕様

**作成日:** 2024年
**目的:** 車検入庫時・出庫時のチェックリスト機能の詳細仕様

---

## 概要

車検入庫時と出庫時にチェックリストを表示し、確認項目をチェックできるようにします。

---

## 車検入庫時チェックリスト

### チェック項目

1. **車検証**
2. **自賠責**
3. **自動車税**
4. **鍵**
5. **ホイールロックナット（有れば）**
6. **車内ETCカード**
7. **車内貴重品**

### 実装仕様

#### 実装場所
- `src/components/features/inspection-entry-checklist-dialog.tsx` - 新規コンポーネント
- `src/app/page.tsx` - チェックイン時に呼び出し

#### 表示タイミング
- チェックイン時にサービス種別が「車検」の場合、自動でダイアログを表示
- または、ジョブカードから「車検チェックリスト」ボタンをクリック

#### UI構成

```
┌─────────────────────────────────────┐
│ 車検入庫チェックリスト              │
├─────────────────────────────────────┤
│                                     │
│  田中様  BMW X3                     │
│  入庫日時: 2024/01/10 10:00        │
│                                     │
│  ────────────────────────────────  │
│                                     │
│  📋 入庫時確認項目                  │
│                                     │
│  ☐ 車検証                           │
│  ☐ 自賠責                           │
│  ☐ 自動車税                         │
│  ☐ 鍵                               │
│  ☐ ホイールロックナット（有れば）   │
│  ☐ 車内ETCカード                    │
│  ☐ 車内貴重品                       │
│                                     │
│  ────────────────────────────────  │
│                                     │
│  📝 備考                            │
│  [自由入力エリア]                   │
│                                     │
│  [チェック完了] [キャンセル]        │
└─────────────────────────────────────┘
```

#### データ保存
- Zoho CRM `CustomModule2` の `field7` (詳細情報) に記録
- または、カスタムフィールド（例: `field24`）にJSON形式で保存

---

## 車検出庫時チェックリスト

### チェック項目

1. **車検証**
2. **自動車検査証記録事項（プリントアウトしてお渡しする）**
3. **自賠責**
4. **記録簿**
5. **鍵**
6. **ホイールロックナット（有れば）**
7. **ETCカード抜き忘れ**
8. **ホイール増し締め（お客様と確認）**

### 実装仕様

#### 実装場所
- `src/components/features/inspection-checkout-checklist-dialog.tsx` - 新規コンポーネント
- `src/app/presentation/[id]/page.tsx` - 出庫時に呼び出し

#### 表示タイミング
- 出庫時にサービス種別が「車検」の場合、自動でダイアログを表示
- または、ジョブカードから「車検出庫チェックリスト」ボタンをクリック

#### UI構成

```
┌─────────────────────────────────────┐
│ 車検出庫チェックリスト              │
├─────────────────────────────────────┤
│                                     │
│  田中様  BMW X3                     │
│  出庫日時: 2024/01/15 16:00        │
│                                     │
│  ────────────────────────────────  │
│                                     │
│  📋 出庫時確認項目                  │
│                                     │
│  ☐ 車検証                           │
│  ☐ 自動車検査証記録事項             │
│     （プリントアウトしてお渡し）    │
│  ☐ 自賠責                           │
│  ☐ 記録簿                           │
│  ☐ 鍵                               │
│  ☐ ホイールロックナット（有れば）   │
│  ☐ ETCカード抜き忘れ                │
│  ☐ ホイール増し締め                 │
│     （お客様と確認）                │
│                                     │
│  ────────────────────────────────  │
│                                     │
│  📝 備考                            │
│  [自由入力エリア]                   │
│                                     │
│  [チェック完了] [キャンセル]        │
└─────────────────────────────────────┘
```

#### データ保存
- Zoho CRM `CustomModule2` の `field7` (詳細情報) に記録
- または、カスタムフィールド（例: `field25`）にJSON形式で保存

---

## データ構造

### InspectionChecklist型

```typescript
export interface InspectionChecklist {
  /** ジョブID */
  jobId: string;
  
  /** 入庫時チェック項目 */
  entryItems: {
    vehicleRegistration: boolean; // 車検証
    compulsoryInsurance: boolean; // 自賠責
    automobileTax: boolean; // 自動車税
    key: boolean; // 鍵
    wheelLockNut: boolean; // ホイールロックナット（有れば）
    etcCard: boolean; // 車内ETCカード
    valuables: boolean; // 車内貴重品
  };
  
  /** 出庫時チェック項目 */
  checkoutItems: {
    vehicleRegistration: boolean; // 車検証
    inspectionRecord: boolean; // 自動車検査証記録事項
    compulsoryInsurance: boolean; // 自賠責
    recordBook: boolean; // 記録簿
    key: boolean; // 鍵
    wheelLockNut: boolean; // ホイールロックナット（有れば）
    etcCardRemoved: boolean; // ETCカード抜き忘れ
    wheelTightening: boolean; // ホイール増し締め（お客様と確認）
  };
  
  /** 入庫時備考 */
  entryNote?: string | null;
  
  /** 出庫時備考 */
  checkoutNote?: string | null;
  
  /** 入庫時チェック完了日時 */
  entryCheckedAt?: string | null; // ISO8601
  
  /** 出庫時チェック完了日時 */
  checkoutCheckedAt?: string | null; // ISO8601
}
```

---

## 実装優先順位

### 第3フェーズ（低優先度・既存機能拡張）

- **車検チェックリスト機能** - 約1-2日
  - 車検入庫時チェックリスト
  - 車検出庫時チェックリスト

---

## 実装のポイント

- ✅ サービス種別が「車検」の場合のみ表示
- ✅ チェックリストは必須ではなく、任意で使用可能
- ✅ チェック完了後も後から編集可能
- ✅ データはZoho CRMに保存（履歴として残る）







