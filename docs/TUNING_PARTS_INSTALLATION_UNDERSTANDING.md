# チューニング・パーツ取り付け 業務理解・分析書

## ドキュメント情報

- **作成日**: 2025-01-XX
- **バージョン**: 1.0
- **対象**: チューニング・パーツ取り付けの業務理解・分析
- **ステータス**: 分析中

---

## 1. 業務の特徴

### 1-1. 基本的な特徴

- **所要日数**: 数日〜数週間（カスタム内容による）
- **検査項目**: カスタム箇所に応じて変動
- **作業内容**: チューニング作業・パーツ取り付けが中心
- **顧客の関心**: 「カスタム内容」「費用」「期間」
- **業務フローパターン**: **パターンA（入庫してから見積もり）** の可能性が高い

### 1-2. 重要な特徴

**一部のカスタムだけの場合**:
- 単発のカスタム作業
- 1回の入庫で完了
- 通常の修理・整備と同様のフロー

**長期で色々カスタムする人**:
- 複数回にわたるカスタム作業
- プロジェクトとして管理
- 複数の入庫にまたがる

### 1-3. 他の入庫区分との違い

| 項目 | 修理・整備 | チューニング・パーツ取り付け |
|------|-----------|-------------------------|
| **目的** | 修理・メンテナンス | 性能向上・カスタマイズ |
| **所要日数** | 1日〜数日 | **数日〜数週間** |
| **複数回にわたる** | なし | **あり（長期プロジェクト）** |
| **プロジェクト管理** | 不要 | **必要（長期の場合）** |

---

## 2. 業務フロー（あるべき姿）

### 2-1. パターン1: 一部のカスタムだけの場合

#### Phase 0: 予約・事前準備
- **顧客の行動**: カスタム希望を予約
- **スタッフの行動**: 
  - カスタム内容の確認（電話・メール等）
  - パーツの在庫確認
  - 前回整備履歴の確認
- **システム要件**: 
  - カスタム内容の事前入力（field7: 詳細情報）
  - 前回整備履歴の表示
  - パーツ在庫の確認

#### Phase 1: 受付
- **所要時間**: 約5-10分
- **確認事項**: 
  - カスタム内容の確認
  - 走行距離
  - 前回整備履歴
- **記録内容**: 
  - カスタム内容
  - 走行距離

#### Phase 2: 診断・検査（簡易）
- **所要時間**: 約30分-1時間
- **検査項目**: 
  - カスタム箇所の確認
  - 関連箇所の点検
  - 性能測定（チューニングの場合）
- **記録内容**: 
  - カスタム箇所の状態
  - 写真（Before）
  - 性能測定値（チューニングの場合）

#### Phase 3: 見積作成
- **所要時間**: 約30分-1時間
- **作業内容**: 
  - パーツ代・工賃の見積もり
  - 作業時間の見積もり
- **記録内容**: 
  - パーツ代・工賃の内訳
  - 作業時間の見積もり

#### Phase 4: 顧客承認
- **所要時間**: 顧客の検討時間による
- **顧客の行動**: 
  - 見積内容の確認
  - 承認・却下
- **システム要件**: 
  - 見積内容の明確な表示

#### Phase 5: 作業実施
- **所要時間**: 承認後、約1-4時間（カスタム内容による）
- **作業内容**: 
  - パーツ取り付け
  - チューニング作業
  - 動作確認
  - 性能測定（チューニングの場合）
- **記録内容**: 
  - 実施した作業の記録
  - Before/After写真
  - 取り付けたパーツの記録
  - 性能測定値（チューニングの場合）

#### Phase 6: 引渡・説明
- **所要時間**: 約15-30分
- **作業内容**: 
  - カスタム内容の説明
  - 動作確認のデモ
  - 性能向上の説明（チューニングの場合）
- **記録内容**: 
  - 引渡日時

### 2-2. パターン2: 長期で色々カスタムする場合

#### Phase 0: 予約・事前準備
- **顧客の行動**: 長期カスタムプロジェクトの予約
- **スタッフの行動**: 
  - カスタム内容の確認（電話・メール等）
  - パーツの在庫確認
  - 前回整備履歴の確認
  - **プロジェクト管理の開始**
- **システム要件**: 
  - カスタム内容の事前入力（field7: 詳細情報）
  - 前回整備履歴の表示
  - パーツ在庫の確認
  - **プロジェクト管理機能**

#### Phase 1: 受付（初回）
- **所要時間**: 約10-15分
- **確認事項**: 
  - カスタム内容の確認（全体計画）
  - 走行距離
  - 前回整備履歴
  - **プロジェクト全体の計画**
- **記録内容**: 
  - カスタム内容（全体計画）
  - 走行距離
  - **プロジェクトID**

#### Phase 2: 診断・検査（各回）
- **所要時間**: 約30分-1時間
- **検査項目**: 
  - カスタム箇所の確認
  - 関連箇所の点検
  - 性能測定（チューニングの場合）
- **記録内容**: 
  - カスタム箇所の状態
  - 写真（Before）
  - 性能測定値（チューニングの場合）

#### Phase 3: 見積作成（各回）
- **所要時間**: 約30分-1時間
- **作業内容**: 
  - パーツ代・工賃の見積もり
  - 作業時間の見積もり
  - **プロジェクト全体の進捗確認**
- **記録内容**: 
  - パーツ代・工賃の内訳
  - 作業時間の見積もり
  - **プロジェクト全体の進捗**

#### Phase 4: 顧客承認（各回）
- **所要時間**: 顧客の検討時間による
- **顧客の行動**: 
  - 見積内容の確認
  - 承認・却下
  - **プロジェクト全体の確認**
- **システム要件**: 
  - 見積内容の明確な表示
  - **プロジェクト全体の進捗表示**

#### Phase 5: 作業実施（各回）
- **所要時間**: 承認後、約1-4時間（カスタム内容による）
- **作業内容**: 
  - パーツ取り付け
  - チューニング作業
  - 動作確認
  - 性能測定（チューニングの場合）
- **記録内容**: 
  - 実施した作業の記録
  - Before/After写真
  - 取り付けたパーツの記録
  - 性能測定値（チューニングの場合）
  - **プロジェクト全体の進捗更新**

#### Phase 6: 引渡・説明（各回）
- **所要時間**: 約15-30分
- **作業内容**: 
  - カスタム内容の説明
  - 動作確認のデモ
  - 性能向上の説明（チューニングの場合）
  - **次回の予定確認**
- **記録内容**: 
  - 引渡日時
  - **次回の予定**

---

## 3. システム要件（あるべき姿）

### 3-1. プロジェクト管理機能

#### 長期カスタムプロジェクトの管理
- **プロジェクトID**: 長期カスタムプロジェクトを識別するID
- **プロジェクト全体の計画**: カスタム内容の全体計画を記録
- **プロジェクト全体の進捗**: 各回の作業の進捗を記録
- **プロジェクト全体の費用**: 各回の費用を累計

#### プロジェクトとJobの関係
- **1つのプロジェクト**: 複数のJobにまたがる
- **各Job**: プロジェクトIDを保持
- **プロジェクト全体の表示**: プロジェクトIDで関連するJobを一覧表示

### 3-2. 診断画面での要件

#### カスタム箇所の確認
- **カスタム箇所の確認**: カスタム箇所の状態を確認
- **関連箇所の点検**: 関連箇所の簡易点検
- **性能測定**: チューニングの場合は性能測定（馬力、トルクなど）
- **写真撮影**: Before写真

### 3-3. 見積画面での要件

#### パーツ代・工賃の見積もり
- **明確な内訳**: パーツ代・工賃の内訳を明確に表示
- **作業時間の見積もり**: 作業時間の見積もりを表示
- **プロジェクト全体の進捗**: 長期プロジェクトの場合は、全体の進捗を表示

### 3-4. 作業画面での要件

#### 作業記録
- **実施した作業の記録**: カスタム内容を詳細に記録
- **Before/After写真**: カスタム前後の写真
- **取り付けたパーツの記録**: 取り付けたパーツの種類・型番・数量
- **性能測定値**: チューニングの場合は性能測定値（馬力、トルクなど）
- **プロジェクト全体の進捗更新**: 長期プロジェクトの場合は、全体の進捗を更新

---

## 4. データモデル

### 4-1. チューニング・パーツ取り付けジョブデータ

```typescript
/**
 * チューニング・パーツ取り付けジョブ
 */
export interface TuningPartsInstallationJob {
  /** Job ID */
  jobId: string;
  /** 入庫区分 */
  serviceKind: "チューニング" | "パーツ取付";
  /** プロジェクトID（長期プロジェクトの場合） */
  projectId?: string;
  /** プロジェクト内の回数（長期プロジェクトの場合） */
  projectSequence?: number;
  
  /** カスタム情報 */
  custom: {
    /** カスタム内容（顧客の説明） */
    description: string;
    /** 走行距離 */
    mileage: number;
  };
  
  /** 診断情報 */
  diagnosis: {
    /** 検査項目の結果 */
    inspectionResults: InspectionResult[];
    /** 性能測定値（チューニングの場合） */
    performanceMeasurements?: PerformanceMeasurement[];
    /** 写真 */
    photos: Photo[];
    /** コメント（整備士の所見） */
    comments: string;
  };
  
  /** 見積情報 */
  estimate: {
    /** パーツ代・工賃の見積もり */
    parts: Part[];
    labor: number;
    /** 作業時間の見積もり */
    estimatedDuration: number;
    total: number;
  };
  
  /** 作業情報 */
  work: {
    /** 実施した作業の記録 */
    workRecords: WorkRecord[];
    /** Before/After写真 */
    photos: Photo[];
    /** 取り付けたパーツ */
    installedParts: InstalledPart[];
    /** 性能測定値（チューニングの場合） */
    performanceMeasurements?: PerformanceMeasurement[];
    /** 動作確認結果 */
    operationCheck: OperationCheckResult;
  };
}

/**
 * 長期カスタムプロジェクト
 */
export interface CustomProject {
  /** プロジェクトID */
  projectId: string;
  /** 顧客ID */
  customerId: string;
  /** 車両ID */
  vehicleId: string;
  /** プロジェクト名 */
  projectName: string;
  /** プロジェクト全体の計画 */
  overallPlan: string;
  /** プロジェクト全体の進捗 */
  progress: number; // 0-100%
  /** プロジェクト全体の費用 */
  totalCost: number;
  /** 関連するJob ID */
  jobIds: string[];
  /** 開始日 */
  startDate: Date;
  /** 予定完了日 */
  plannedEndDate?: Date;
  /** 実際の完了日 */
  actualEndDate?: Date;
  /** ステータス */
  status: "進行中" | "完了" | "中断";
}

/**
 * 性能測定値（チューニングの場合）
 */
export interface PerformanceMeasurement {
  /** 測定項目 */
  item: "馬力" | "トルク" | "その他";
  /** Before値 */
  beforeValue: number;
  /** After値 */
  afterValue: number;
  /** 単位 */
  unit: string;
}
```

---

## 5. 質問事項（最低限）

以下の点について確認が必要です：

1. **プロジェクト管理**: 長期で色々カスタムする場合、どのように管理するか？プロジェクトとして管理するのか？

2. **チューニングとパーツ取り付けの違い**: チューニングとパーツ取り付けは、同じ入庫区分として扱うのか、それとも別々の入庫区分として扱うのか？

3. **性能測定**: チューニングの場合は性能測定（馬力、トルクなど）が必要か？

---

## 更新履歴

- 2025-01-XX: 初版作成


























