# UX修正計画 - ユーザー指摘事項の対応

## ユーザー指摘事項の整理

### 1. 受付開始は車両単位で行う
- **現在の問題**: 複合作業の場合、アクションボタンが非表示になっている
- **修正**: 受付開始（入庫待ち）の場合は、複合作業でもアクションボタンを表示

### 2. 受付後は作業を個別に選択
- **現在の問題**: 受付後もアクションボタンが非表示になっている
- **修正**: 受付後（入庫済み以降）の場合のみ、作業カード一覧を表示
- **修正**: 受付後は、作業カード一覧から個別に作業を選択して進む

### 3. 見積承認は案件単位
- **現在**: 案件単位で行う（問題なし）

### 4. 引き渡しは全作業完了時のみ
- **現在**: `canCheckout`関数で全作業完了チェックが実装されている
- **確認**: presentationページで全作業のデータを表示している

### 5. 作業プロセスは個別に
- **現在**: 作業カード一覧から個別に選択できる（問題なし）

---

## 修正方針

### 修正1: アクションボタンの表示ロジック

**現在:**
```typescript
{actionConfig && actionConfig.priority !== "none" && (!workOrders || workOrders.length <= 1) && (
  // アクションボタン
)}
```

**修正後:**
```typescript
{actionConfig && actionConfig.priority !== "none" && (
  // 受付開始（入庫待ち）の場合は、複合作業でも表示
  // 受付後（入庫済み以降）の場合は、単体作業のみ表示
  (job.field5 === "入庫待ち" || !workOrders || workOrders.length <= 1) && (
    // アクションボタン
  )
)}
```

### 修正2: 作業カード一覧の表示条件

**現在:**
```typescript
{workOrders && workOrders.length > 1 && actionConfig && actionConfig.priority !== "none" && (
  // 作業カード一覧
)}
```

**修正後:**
```typescript
{workOrders && workOrders.length > 1 && job.field5 !== "入庫待ち" && (
  // 作業カード一覧（受付後のみ表示）
)}
```

---

## 実装手順

1. アクションボタンの表示ロジックを修正
2. 作業カード一覧の表示条件を修正
3. 引き渡しの条件を確認（既に実装済みの可能性）


