# チューニング・パーツ取り付け 確認済み仕様書

## ドキュメント情報

- **作成日**: 2025-01-XX
- **バージョン**: 1.0
- **対象**: チューニング・パーツ取り付けの確認済み仕様
- **ステータス**: 実装準備完了

---

## 1. 確認済み事項

### 1-1. チューニングとパーツ取り付けの扱い

**質問**: チューニングとパーツ取り付けは、同じ入庫区分として扱うのか、それとも別々の入庫区分として扱うのか？

**回答**: ✅ **同じ入庫区分として扱う**

**詳細**:
- **チューニング**: 社外品などのカスタム
- **パーツ取り付け**: ナビとか純正・付属品を取り付けたり

**設計決定**:
- システム上は「チューニング」または「パーツ取付」として1つの入庫区分で管理
- 受付時または診断開始時に、具体的な種類（チューニング/パーツ取り付け）を選択
- 種類選択により、診断項目・見積項目・作業項目が動的に変化

### 1-2. 長期で色々カスタムする場合の管理

**質問**: 長期で色々カスタムする場合、プロジェクトとして管理しますか？各回を独立したJOBとしては管理しません。

**回答**: ✅ **各回を独立したJOBとしては管理しない**

**設計決定**:
- 長期で色々カスタムする場合でも、各回を独立したJobとして管理しない
- **同じJobレコードで複数回の作業を管理する**（推測）
- または、**顧客・車両で紐付けて管理する**（要確認）

**要確認**: 同じJobレコードで複数回の作業を管理するのか、それとも別の方法で管理するのか？

### 1-3. 性能測定

**質問**: チューニングの場合は性能測定（馬力、トルクなど）が必要か？

**回答**: ✅ **チューニングでも性能測定は不要**

**設計決定**:
- チューニングでも性能測定は不要
- 診断・作業記録は通常の項目のみ

### 1-4. 業務フローパターン

**質問**: 業務フローパターンについて

**回答**: ✅ **パターンA（入庫→診断→見積→承認→作業）で正しい（推測）**

**設計決定**:
- パターンA（入庫→診断→見積→承認→作業）を採用
- 修理・整備と同様のフロー

### 1-5. データソース

**質問**: データソースについて

**回答**: ✅ **すべて同じ**

**設計決定**:
- 車両情報: Google Sheets「【DB】車両マスタ」の「車両_同期用」シートから取得
- 費用情報: 同じく「車両_同期用」シートから取得（該当する場合）
- 部品情報: 部品マスタから取得（今後実装）

### 1-6. PDF生成

**質問**: PDF生成について

**回答**: ✅ **不要。PDFで出すのは車検と12ヶ月点検のみ**

**設計決定**:
- チューニング・パーツ取り付けではPDF生成は不要
- 作業記録はシステム内で管理

---

## 2. 確定した仕様サマリー

### 2-1. 入庫区分の設定

**入庫区分**: `チューニング` または `パーツ取付`

**設計決定**:
- システム上は「チューニング」または「パーツ取付」として管理
- 受付時または診断開始時に、具体的な種類を選択
- **チューニング**: 社外品などのカスタム
- **パーツ取り付け**: ナビとか純正・付属品を取り付けたり

### 2-2. 業務フロー（パターンA）

```
1. 入庫: カスタム希望の車両が入庫
2. 受付: カスタム内容を確認（5-10分）
3. 診断: カスタム箇所の確認・簡易検査を実施（30分-1時間）
4. 見積作成: パーツ代・工賃の見積もりを作成（30分-1時間）
5. 顧客承認: 見積内容を確認して承認
6. 作業実施: 承認後にカスタムを実施（1-4時間）
   - 部品取り寄せが必要な場合は複数日にまたがる
7. 引渡・説明: カスタム内容を説明して引渡（15-30分）
```

### 2-3. 長期で色々カスタムする場合

**設計決定（要確認）**:
- 長期で色々カスタムする場合でも、各回を独立したJobとして管理しない
- **同じJobレコードで複数回の作業を管理する**（推測）
- または、**顧客・車両で紐付けて管理する**（要確認）

### 2-4. 検査項目

**設計決定**:
- カスタム箇所の確認
- 関連箇所の簡易点検
- 性能測定は不要（チューニングでも）

### 2-5. 写真撮影

**設計決定**:
- Before/After写真を撮影（必要に応じて）
- 動画撮影はケースバイケース

### 2-6. 測定値

**設計決定**:
- 性能測定は不要（チューニングでも）
- 必要に応じて他の測定値を入力

### 2-7. PDF生成

**設計決定**:
- チューニング・パーツ取り付けではPDF生成は不要
- 作業記録はシステム内で管理

### 2-8. データソース

**設計決定**:
- 車両情報: Google Sheets「【DB】車両マスタ」の「車両_同期用」シートから取得
- 費用情報: 同じく「車両_同期用」シートから取得（該当する場合）
- 部品情報: 部品マスタから取得（今後実装）

---

## 3. 画面設計

### 3-1. 受付画面（Phase 1）

#### カスタム内容の確認

**設計**:
- カスタム内容の確認
- 種類の選択（チューニング/パーツ取り付け）
- 走行距離を入力
- 前回整備履歴の表示

**UI要素**:
- カスタム内容入力欄（テキストエリア）
- 種類選択（ラジオボタンまたはドロップダウン: チューニング/パーツ取り付け）
- 走行距離入力欄
- 前回整備履歴表示

### 3-2. 診断画面（Phase 2）

#### 簡易検査項目

**設計**:
- カスタム箇所の確認
- 関連箇所の簡易点検
- 写真撮影（Before）

**UI要素**:
- 検査項目リスト（カスタム箇所に応じて動的）
- 写真撮影ボタン
- コメント入力欄

### 3-3. 見積画面（Phase 3）

#### パーツ代・工賃の見積もり

**設計**:
- パーツ代・工賃の見積もり
- 作業時間の見積もり
- 写真・コメントの紐付け

**UI要素**:
- パーツ選択UI
- 工賃入力欄
- 作業時間見積もり入力欄
- 合計金額表示
- 写真・コメントの紐付け

### 3-4. 作業画面（Phase 4）

#### 作業記録

**設計**:
- 実施した作業の記録
- Before/After写真の撮影
- 取り付けたパーツの記録
- 動作確認の結果

**UI要素**:
- 作業記録入力欄
- Before/After写真撮影ボタン
- 取り付けたパーツ入力欄
- 動作確認チェックボックス
- 作業メモ入力欄

---

## 4. データモデル

### 4-1. チューニング・パーツ取り付けジョブデータ

```typescript
/**
 * チューニング・パーツ取り付けジョブ
 */
export interface TuningPartsInstallationJob {
  /** Job ID */
  jobId: string;
  /** 入庫区分 */
  serviceKind: "チューニング" | "パーツ取付";
  /** 種類 */
  type: "チューニング" | "パーツ取り付け";
  
  /** カスタム情報 */
  custom: {
    /** カスタム内容（顧客の説明） */
    description: string;
    /** 走行距離 */
    mileage: number;
  };
  
  /** 診断情報 */
  diagnosis: {
    /** 検査項目の結果 */
    inspectionResults: InspectionResult[];
    /** 写真 */
    photos: Photo[];
    /** コメント（整備士の所見） */
    comments: string;
  };
  
  /** 見積情報 */
  estimate: {
    /** パーツ代・工賃の見積もり */
    parts: Part[];
    labor: number;
    /** 作業時間の見積もり */
    estimatedDuration: number;
    total: number;
  };
  
  /** 作業情報 */
  work: {
    /** 実施した作業の記録 */
    workRecords: WorkRecord[];
    /** Before/After写真 */
    photos: Photo[];
    /** 取り付けたパーツ */
    installedParts: InstalledPart[];
    /** 動作確認結果 */
    operationCheck: OperationCheckResult;
  };
  
  /** ステータス */
  status: "診断中" | "見積作成待ち" | "部品取り寄せ中" | "作業待ち" | "作業中" | "出庫待ち";
}
```

---

## 5. 実装方針

### 5-1. 種類選択の実装

**設計**:
- 受付時または診断開始時に種類（チューニング/パーツ取り付け）を選択
- 種類選択により、以降の画面が動的に変化
- 種類設定をマスタデータとして管理

### 5-2. 長期カスタムの管理実装

**設計（要確認）**:
- 長期で色々カスタムする場合でも、各回を独立したJobとして管理しない
- **同じJobレコードで複数回の作業を管理する**（推測）
- または、**顧客・車両で紐付けて管理する**（要確認）

---

## 6. 要確認事項

以下の点について確認が必要です：

1. **長期カスタムの管理方法**: 「各回を独立したJOBとしては管理しません」というのは、同じJobレコードで複数回の作業を管理するのか、それとも別の方法で管理するのか？

---

## 7. 次のステップ

1. **種類選択UIの実装**: 受付時または診断開始時の種類選択UI
2. **長期カスタム管理の実装**: 長期カスタムの管理方法を確定して実装
3. **動的UIの実装**: 種類に応じた診断画面・見積画面・作業画面の動的表示

---

## 更新履歴

- 2025-01-XX: 初版作成（確認済み仕様書）


































