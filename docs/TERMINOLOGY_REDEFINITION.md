# 用語の再定義

## 📋 問題の概要

現在、用語が混乱しており、「ジョブ単位」と「WorkOrder単位」が同じ意味ではないかと誤解される可能性があります。

---

## 🔍 現在の用語とデータ構造

### データ構造

```
ZohoJob (入庫案件)
├─ id: "job-001"
├─ customer: 田中太郎
├─ vehicle: トヨタ プリウス
├─ field_service_kinds: ["車検", "板金・塗装"]
└─ field_work_orders: [
     WorkOrder1: { id: "wo-001", serviceKind: "車検", ... },
     WorkOrder2: { id: "wo-002", serviceKind: "板金・塗装", ... }
   ]
```

### 現在の用語（混乱している）

- **「ジョブ」**: `ZohoJob`を指す場合と、`WorkOrder`を指す場合がある
- **「作業」**: `WorkOrder`を指す場合と、作業内容を指す場合がある
- **「案件」**: `ZohoJob`を指す場合がある

---

## ✅ 用語の再定義

### 1. データモデル用語

| 英語 | 日本語 | 説明 | 例 |
|------|--------|------|-----|
| `ZohoJob` | **入庫案件** | 1つの車両の入庫単位。顧客・車両・入庫日時などの基本情報を持つ | 田中太郎さんのプリウスが2025-01-15に入庫 |
| `WorkOrder` | **作業オーダー** | 1つの作業単位。入庫案件内の個別の作業（車検、板金・塗装など） | 車検の作業オーダー、板金・塗装の作業オーダー |

### 2. UI表示用語

| 表示名 | 説明 | 使用箇所 |
|--------|------|----------|
| **案件カード** | `ZohoJob`を表示するカード | TOPページのカード一覧 |
| **作業一覧** | `WorkOrder[]`を表示するリスト | 案件カード内の展開セクション |
| **作業カード** | 個別の`WorkOrder`を表示するカード | 作業一覧内の各カード |

### 3. 判定ロジック用語

| 用語 | 説明 | 使用例 |
|------|------|--------|
| **入庫案件単位** | `ZohoJob`全体で判定 | 「入庫案件単位で長期プロジェクトを判定する」 |
| **作業オーダー単位** | 個別の`WorkOrder`で判定 | 「作業オーダー単位で長期プロジェクトを判定する」 |

---

## 📝 用語使用ルール

### 1. コード内での用語

**推奨:**
- `ZohoJob` → 「入庫案件」または「案件」
- `WorkOrder` → 「作業オーダー」または「作業」

**非推奨:**
- 「ジョブ」→ 曖昧なので使用しない
- 「ワークオーダー」→ 英語のままなので、日本語では「作業オーダー」を使用

### 2. コメント・ドキュメントでの用語

**推奨:**
```typescript
/**
 * 入庫案件が長期プロジェクトかどうかを判定
 * @deprecated 作業オーダー単位での判定に変更予定
 */
export function isLongTermProject(job: ZohoJob): boolean {
  // ...
}

/**
 * 作業オーダーが長期プロジェクトかどうかを判定
 */
export function isLongTermWorkOrder(workOrder: WorkOrder): boolean {
  // ...
}
```

### 3. UI表示での用語

**推奨:**
- 「案件一覧」→ `ZohoJob[]`のリスト
- 「作業一覧」→ `WorkOrder[]`のリスト
- 「作業を追加」→ 新しい`WorkOrder`を追加

---

## 🔄 長期プロジェクト判定の正しい表現

### 現在の表現（誤解を招く）

❌ **「ジョブ単位で判定」** → `ZohoJob`全体で判定（複合業務で問題）
❌ **「WorkOrder単位で判定」** → 英語と日本語が混在

### 正しい表現

✅ **「入庫案件単位で判定」** → `ZohoJob`全体で判定
✅ **「作業オーダー単位で判定」** → 個別の`WorkOrder`で判定

### 長期プロジェクト判定の正しいアプローチ

**複合業務（車検 + 板金・塗装）の場合:**

```
入庫案件: 田中太郎さんのプリウス
├─ 作業オーダー1: 車検（通常の作業）
└─ 作業オーダー2: 板金・塗装（長期プロジェクト）

判定方法:
- ❌ 入庫案件単位: 入庫案件全体が長期プロジェクト → 誤り
- ✅ 作業オーダー単位: 作業オーダー2のみが長期プロジェクト → 正しい
```

---

## 📚 用語一覧表

| 英語 | 日本語（正式） | 日本語（略称） | 説明 |
|------|---------------|---------------|------|
| `ZohoJob` | 入庫案件 | 案件 | 1つの車両の入庫単位 |
| `WorkOrder` | 作業オーダー | 作業 | 1つの作業単位 |
| `ServiceKind` | 入庫区分 | - | 車検、板金・塗装など |
| `JobStage` | 工程ステージ | ステータス | 入庫待ち、作業待ちなど |
| `WorkOrderStatus` | 作業オーダーステータス | - | 未開始、診断中、完了など |

---

## 🎯 実装での用語統一

### 関数名の命名規則

**推奨:**
```typescript
// 入庫案件関連
isLongTermProject(job: ZohoJob)  // 非推奨（後方互換性のため残す）
hasLongTermWorkOrder(job: ZohoJob)  // 推奨

// 作業オーダー関連
isLongTermWorkOrder(workOrder: WorkOrder)  // 推奨
extractLongTermProgressFromWorkOrder(workOrder: WorkOrder)  // 推奨
```

### 変数名の命名規則

**推奨:**
```typescript
const job: ZohoJob;  // 入庫案件
const workOrder: WorkOrder;  // 作業オーダー
const jobs: ZohoJob[];  // 入庫案件一覧
const workOrders: WorkOrder[];  // 作業オーダー一覧
```

---

## ✅ 結論

1. **用語を明確に定義**: 「入庫案件」と「作業オーダー」を明確に区別
2. **「ジョブ」という用語を避ける**: 曖昧なので使用しない
3. **判定ロジックの表現**: 「入庫案件単位」と「作業オーダー単位」で明確に区別
4. **長期プロジェクト判定**: 作業オーダー単位で判定する（複合業務に対応）


