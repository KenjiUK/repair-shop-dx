# 板金・塗装 業務理解ドキュメント

## ドキュメント情報

- **作成日**: 2025-01-XX
- **バージョン**: 0.1
- **対象**: 板金・塗装の業務理解
- **ステータス**: 確認待ち

---

## 1. 業務の特徴

### 1-1. 自社施工なし（外注）

**重要な特徴**:
- **自社で施工を行わない**
- **板金・塗装屋に預ける（外注）**
- 自社は受付・診断・見積・外注先管理・品質確認・引渡を担当

### 1-2. 業務フローの想定

```
1. 予約・受付: 板金・塗装が必要な車両の受付
2. 診断: 損傷箇所の確認、写真撮影、見積もり作成
3. 顧客承認: 見積もりを提示して承認を得る
4. 外注先への発注・預け: 板金・塗装屋に車両を預ける
5. 外注先での作業: 板金・塗装屋で作業実施（自社では作業しない）
6. 外注先からの引き取り: 作業完了後、車両を引き取る
7. 品質確認: 作業内容の確認
8. 引渡: 顧客に引渡
```

---

## 2. 確認が必要な事項

### 2-1. 業務フローパターン

**質問**: 業務フローパターンはどのようになりますか？

**想定パターン**:
- **パターンA（入庫→診断→見積→承認→外注発注→外注作業→引き取り→引渡）**: 入庫してから診断を実施し、見積を作成して承認を得てから外注先に発注
- **パターンB（事前見積→承認→入庫→外注発注→外注作業→引き取り→引渡）**: 事前に見積を作成して承認を得てから入庫

**確認事項**:
- どちらのパターンになりますか？
- 外注先への発注は、顧客承認後すぐに行いますか？

### 2-2. 外注先の管理

**質問**: 外注先の管理方法について

**想定**:
- 外注先（板金・塗装屋）のマスタ管理が必要
- 外注先ごとに見積もりを依頼する場合がある
- 外注先への発注時に、外注先を選択する必要がある

**確認事項**:
- 外注先は複数ありますか？
- 外注先のマスタ管理は必要ですか？
- 外注先ごとに見積もりを依頼する必要がありますか？
- 外注先への発注時に、外注先を選択する必要がありますか？

### 2-3. 診断内容

**質問**: 診断時に確認する内容について

**想定**:
- 損傷箇所の確認（板金箇所、塗装箇所）
- 損傷の程度（軽微、中程度、深刻）
- Before写真の撮影（必須）
- 見積もりに必要な情報の収集

**確認事項**:
- 診断時に確認する項目は何ですか？
- 損傷箇所の記録方法は？（部位、程度、写真）
- 見積もりに必要な情報は何ですか？

### 2-4. 見積もり

**質問**: 見積もりの作成方法について

**想定**:
- 診断結果に基づいて見積もりを作成
- 外注先への見積もり依頼が必要な場合がある
- 外注先からの見積もり回答を基に、顧客への見積もりを作成

**確認事項**:
- 見積もりは自社で作成しますか？それとも外注先に依頼しますか？
- 外注先への見積もり依頼が必要な場合、どのように管理しますか？
- 見積もりの項目は何ですか？（板金費用、塗装費用、部品費用など）

### 2-5. 外注先への発注・預け

**質問**: 外注先への発注・預けの流れについて

**想定**:
- 顧客承認後、外注先に発注
- 車両を外注先に預ける
- 外注先での作業進捗を管理

**確認事項**:
- 外注先への発注は、顧客承認後すぐに行いますか？
- 車両を外注先に預ける際の手続きはありますか？
- 外注先での作業進捗をどのように管理しますか？（電話連絡、システム連携など）

### 2-6. 外注先からの引き取り

**質問**: 外注先からの引き取りの流れについて

**想定**:
- 外注先から作業完了の連絡を受ける
- 車両を引き取る
- 品質確認を実施

**確認事項**:
- 外注先からの作業完了連絡はどのように受けますか？
- 車両を引き取る際の手続きはありますか？
- 品質確認はどのように実施しますか？

### 2-7. 品質確認

**質問**: 品質確認の内容について

**想定**:
- 作業内容の確認（板金、塗装の品質）
- After写真の撮影
- 不具合があれば外注先に返品・修正依頼

**確認事項**:
- 品質確認の項目は何ですか？
- After写真の撮影は必須ですか？
- 不具合があった場合の対応はどうしますか？

### 2-8. 写真撮影

**質問**: 写真撮影について

**想定**:
- Before写真（損傷箇所の撮影、必須）
- After写真（作業完了後の撮影、必須）

**確認事項**:
- Before/After写真の撮影は必須ですか？
- 撮影する箇所はどこですか？（損傷箇所、車体全体など）

### 2-9. 測定値

**質問**: 測定値の入力について

**想定**:
- 損傷箇所の寸法（長さ、幅、深さなど）
- 作業時間の記録（外注先での作業時間）

**確認事項**:
- 測定値の入力は必要ですか？
- どのような測定値を記録しますか？

### 2-10. PDF生成

**質問**: PDF生成について

**想定**:
- 板金・塗装ではPDF生成は不要（車検・12ヶ月点検のみPDF生成）

**確認事項**:
- 板金・塗装でもPDFを生成しますか？

### 2-11. 部品の管理

**質問**: 部品の管理について

**想定**:
- 板金・塗装に必要な部品（バンパー、ドア、フェンダーなど）の管理
- 部品の取り寄せが必要な場合がある

**確認事項**:
- 部品の管理は必要ですか？
- 部品の取り寄せが必要な場合、どのように管理しますか？

### 2-12. 作業期間

**質問**: 作業期間について

**想定**:
- 外注先での作業期間は数日から数週間かかる場合がある
- 顧客は車を預ける必要がある

**確認事項**:
- 外注先での作業期間はどの程度ですか？
- 顧客は車を預ける必要がありますか？

### 2-13. 代車の提供

**質問**: 代車の提供について

**想定**:
- 作業期間が長い場合、代車を提供する場合がある

**確認事項**:
- 代車の提供は必要ですか？
- 代車の提供はどのような場合に行いますか？

---

## 3. 想定される画面設計

### 3-1. 受付画面（Phase 1）

#### 入庫処理

**設計**:
- 板金・塗装が必要な車両の受付
- 走行距離を入力
- 前回板金・塗装履歴の表示

**UI要素**:
- 走行距離入力欄
- 前回板金・塗装履歴表示

### 3-2. 診断画面（Phase 2）

#### 損傷箇所の確認

**設計**:
- 損傷箇所の確認（板金箇所、塗装箇所）
- 損傷の程度（軽微、中程度、深刻）
- Before写真の撮影
- 見積もりに必要な情報の収集

**UI要素**:
- 損傷箇所の選択（部位、程度）
- Before写真撮影ボタン
- コメント入力欄

### 3-3. 見積作成画面（Phase 3）

#### 見積もりの作成

**設計**:
- 診断結果に基づいて見積もりを作成
- 外注先への見積もり依頼が必要な場合がある
- 外注先からの見積もり回答を基に、顧客への見積もりを作成

**UI要素**:
- 見積もり項目の入力（板金費用、塗装費用、部品費用など）
- 外注先への見積もり依頼ボタン（必要に応じて）
- 見積金額表示

### 3-4. 外注発注画面（Phase 4）

#### 外注先への発注

**設計**:
- 顧客承認後、外注先に発注
- 外注先を選択
- 車両を外注先に預ける

**UI要素**:
- 外注先選択（ドロップダウン）
- 発注内容の確認
- 発注ボタン

### 3-5. 外注作業管理画面（Phase 5）

#### 外注先での作業進捗管理

**設計**:
- 外注先での作業進捗を管理
- 作業完了の連絡を受ける

**UI要素**:
- 作業進捗状況の表示
- 作業完了連絡の受付

### 3-6. 引き取り・品質確認画面（Phase 6）

#### 外注先からの引き取りと品質確認

**設計**:
- 外注先から車両を引き取る
- 品質確認を実施
- After写真の撮影

**UI要素**:
- 品質確認チェックリスト
- After写真撮影ボタン
- 不具合があれば返品・修正依頼ボタン

### 3-7. 引渡画面（Phase 7）

#### 顧客への引渡

**設計**:
- 作業内容を説明して引渡

**UI要素**:
- 作業内容の表示
- 引渡ボタン

---

## 4. 想定されるデータモデル

### 4-1. 板金・塗装ジョブデータ

```typescript
/**
 * 板金・塗装ジョブ
 */
export interface BodyPaintJob {
  /** Job ID */
  jobId: string;
  /** 入庫区分 */
  serviceKind: "板金・塗装";
  
  /** 車両情報 */
  vehicle: {
    /** 車両ID */
    vehicleId: string;
    /** 走行距離 */
    mileage: number;
  };
  
  /** 診断情報 */
  diagnosis: {
    /** 損傷箇所 */
    damageLocations: DamageLocation[];
    /** Before写真 */
    beforePhotos: Photo[];
    /** コメント（整備士の所見） */
    comments: string;
  };
  
  /** 見積情報 */
  estimate: {
    /** 見積もり項目 */
    items: EstimateItem[];
    /** 合計金額 */
    total: number;
    /** 承認日時 */
    approvedAt?: Date;
  };
  
  /** 外注情報 */
  outsourcing: {
    /** 外注先ID */
    vendorId: string;
    /** 外注先名 */
    vendorName: string;
    /** 発注日時 */
    orderDate?: Date;
    /** 預け日時 */
    deliveryDate?: Date;
    /** 作業進捗状況 */
    progress: "発注済み" | "作業中" | "作業完了" | "引き取り済み";
    /** 作業完了日時 */
    completionDate?: Date;
    /** 引き取り日時 */
    pickupDate?: Date;
  };
  
  /** 品質確認情報 */
  qualityCheck: {
    /** 品質確認結果 */
    result: "合格" | "要修正" | "返品";
    /** 確認項目 */
    checkItems: QualityCheckItem[];
    /** After写真 */
    afterPhotos: Photo[];
    /** コメント */
    comments: string;
  };
  
  /** ステータス */
  status: "入庫待ち" | "診断中" | "見積作成待ち" | "顧客承認待ち" | "外注発注待ち" | "外注作業中" | "引き取り待ち" | "品質確認中" | "出庫待ち";
}

/**
 * 損傷箇所
 */
export interface DamageLocation {
  /** 部位 */
  location: string;
  /** 損傷の種類（板金、塗装） */
  type: "板金" | "塗装" | "板金・塗装";
  /** 損傷の程度 */
  severity: "軽微" | "中程度" | "深刻";
  /** 写真 */
  photo: Photo;
  /** コメント */
  comment?: string;
}

/**
 * 見積もり項目
 */
export interface EstimateItem {
  /** 項目名 */
  name: string;
  /** 数量 */
  quantity: number;
  /** 単価 */
  unitPrice: number;
  /** 金額 */
  amount: number;
  /** 備考 */
  note?: string;
}

/**
 * 品質確認項目
 */
export interface QualityCheckItem {
  /** 項目名 */
  name: string;
  /** 確認結果 */
  result: "合格" | "要修正" | "不適合";
  /** コメント */
  comment?: string;
}

/**
 * 外注先
 */
export interface Vendor {
  /** 外注先ID */
  id: string;
  /** 外注先名 */
  name: string;
  /** 連絡先 */
  contact: string;
  /** 住所 */
  address: string;
}
```

---

## 5. 次のステップ

1. **業務フローパターンの確認**: パターンAかパターンBかを確認
2. **外注先管理の確認**: 外注先のマスタ管理が必要か確認
3. **診断内容の確認**: 診断時に確認する項目を確認
4. **見積もりの確認**: 見積もりの作成方法を確認
5. **外注発注の確認**: 外注先への発注・預けの流れを確認
6. **品質確認の確認**: 品質確認の内容を確認

---

## 更新履歴

- 2025-01-XX: 初版作成（業務理解ドキュメント）


























