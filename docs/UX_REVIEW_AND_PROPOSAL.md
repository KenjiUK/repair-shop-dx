# UI/UXレビューと改善提案

## 現状のUI/UX分析

### 現在のフロー

```
トップページ（ジョブカード一覧）
    ↓
ジョブカードをクリック
    ↓
診断画面
    ├─ 単体作業: 直接診断入力
    └─ 複合作業: WorkOrderList表示 → 作業グループを選択 → 診断入力
```

### 問題点

1. **認知負荷が高い**
   - 複合作業の場合、診断画面に入ってから「何をすべきか」を判断する必要がある
   - ユーザーが「まず何を選べばいいか」迷う可能性がある

2. **情報階層が不明確**
   - WorkOrderListが診断画面の上部に表示されるが、ヘッダーに被って見えにくい
   - 作業グループの選択と診断入力が同じ画面にあるため、焦点が分散する

3. **初回訪問時の理解が難しい**
   - 複合作業の場合、診断画面に入った瞬間に「作業グループを選ぶ」という判断を迫られる
   - 単体作業と複合作業で画面構成が異なるため、一貫性に欠ける

---

## 業界ベストプラクティスの調査結果

### 1. Progressive Disclosure（段階的開示）の原則
- **原則**: ユーザーに一度にすべての情報を見せず、必要な情報を段階的に提示する
- **適用**: 複合作業の場合、まず「どの作業を進めるか」を明確に提示してから、診断画面に遷移

### 2. Contextual Navigation（文脈的ナビゲーション）
- **原則**: ユーザーの現在の状況に応じて、適切なナビゲーションを提供
- **適用**: ジョブカードから診断画面への遷移時に、複合作業の場合は中間画面を挟む

### 3. Clear Mental Model（明確なメンタルモデル）
- **原則**: ユーザーがシステムの構造を直感的に理解できるようにする
- **適用**: 「ジョブ → 作業グループ → 診断」という階層構造を明確に示す

### 4. Minimize Cognitive Load（認知負荷の最小化）
- **原則**: ユーザーが一度に考える必要がある情報を最小限にする
- **適用**: 作業グループの選択と診断入力を分離する

---

## 改善提案

### 提案1: 診断前選択画面の追加（推奨）

**フロー:**
```
トップページ（ジョブカード一覧）
    ↓
ジョブカードをクリック
    ↓
┌─────────────────────────────────┐
│ 単体作業の場合                  │
│ → 直接診断画面に遷移            │
└─────────────────────────────────┘
    ↓
┌─────────────────────────────────┐
│ 複合作業の場合                  │
│ → 作業グループ選択画面          │
│   - 各作業グループのカード表示  │
│   - ステータス表示              │
│   - 「この作業を開始」ボタン    │
│ → 選択した作業の診断画面に遷移 │
└─────────────────────────────────┘
```

**メリット:**
- ✅ ユーザーが「何をすべきか」を最初から明確に理解できる
- ✅ 各作業グループの進捗状況を一目で確認できる
- ✅ 診断画面がシンプルになり、焦点が明確になる
- ✅ 単体作業と複合作業で一貫した体験を提供できる

**デメリット:**
- ❌ ページ数が1つ増える（ただし、複合作業の場合のみ）
- ❌ 画面遷移が1回増える（ただし、明確な目的があるため問題なし）

**実装イメージ:**
```
/mechanic/diagnosis/{jobId}/select
  - 作業グループ一覧をカード形式で表示
  - 各カードに「診断を開始」ボタン
  - 進捗状況を視覚的に表示
  - 「すべての作業を確認」ボタン（オプション）
```

---

### 提案2: 診断画面内での改善（現状維持 + 改善）

**フロー:**
```
トップページ（ジョブカード一覧）
    ↓
ジョブカードをクリック
    ↓
診断画面
    ├─ 単体作業: 直接診断入力
    └─ 複合作業: 
        - WorkOrderListを画面中央に大きく表示
        - タブ形式で作業グループを切り替え
        - 選択中の作業グループを強調表示
```

**改善点:**
1. **WorkOrderListの配置を改善**
   - ヘッダーの下ではなく、画面の中央上部に配置
   - より目立つデザイン（カード形式、大きなアイコン）

2. **タブ形式の導入**
   - 作業グループをタブで表示
   - 選択中のタブを強調
   - 各タブに進捗状況を表示

3. **デフォルト選択の改善**
   - 最初に未完了の作業グループを自動選択
   - すべて完了している場合は、最初の作業グループを選択

**メリット:**
- ✅ ページ数を増やさない
- ✅ 既存の実装を大きく変更しない
- ✅ 診断画面内で完結する

**デメリット:**
- ❌ 複合作業の場合、診断画面が複雑になる
- ❌ 作業グループの選択と診断入力が同じ画面にあるため、焦点が分散する可能性

---

### 提案3: ハイブリッドアプローチ（最推奨）

**フロー:**
```
トップページ（ジョブカード一覧）
    ↓
ジョブカードをクリック
    ↓
┌─────────────────────────────────┐
│ 単体作業の場合                  │
│ → 直接診断画面に遷移            │
└─────────────────────────────────┘
    ↓
┌─────────────────────────────────┐
│ 複合作業の場合                  │
│ → 診断画面（WorkOrderListを強調）│
│   - 画面中央上部に大きなカード  │
│   - 「作業を選択してください」   │
│   - 選択後、診断入力エリア表示  │
│   - 作業グループ切り替えタブ   │
└─────────────────────────────────┘
```

**実装イメージ:**
1. **診断画面の初期状態**
   - 複合作業の場合、WorkOrderListを画面中央上部に大きく表示
   - 「どの作業を進めますか？」というメッセージ
   - 各作業グループのカードをクリック可能に

2. **作業グループ選択後**
   - 選択した作業グループの診断入力エリアを表示
   - WorkOrderListは上部に固定（常に表示）
   - タブ形式で作業グループを切り替え可能

3. **視覚的階層**
   - 選択中の作業グループを強調（背景色、ボーダー）
   - 未完了の作業グループを優先表示
   - 完了した作業グループはグレーアウト

**メリット:**
- ✅ ページ数を増やさない
- ✅ ユーザーが「何をすべきか」を明確に理解できる
- ✅ 作業グループの切り替えが簡単
- ✅ 単体作業と複合作業で一貫した体験を提供

**デメリット:**
- ❌ 診断画面がやや複雑になる（ただし、視覚的階層で解決可能）

---

## 推奨案: ハイブリッドアプローチ（提案3）

### 理由

1. **認知負荷の最小化**
   - ページ数を増やさずに、ユーザーの理解を促進
   - 診断画面内で完結するため、ナビゲーションがシンプル

2. **柔軟性**
   - 作業グループの切り替えが簡単
   - 途中で作業を追加しても、同じ画面で管理可能

3. **実装コスト**
   - 既存の実装を大きく変更せずに改善可能
   - WorkOrderListの配置とデザインを改善するだけ

4. **ユーザー体験**
   - 単体作業と複合作業で一貫した体験
   - 複合作業の場合でも、迷わず操作できる

---

## 具体的な改善内容

### 1. WorkOrderListの配置とデザイン改善

**現在:**
- ヘッダーの下に小さく表示
- カード形式だが、目立たない

**改善後:**
- 画面中央上部に大きく表示
- より目立つデザイン（大きなアイコン、明確なボーダー）
- 「どの作業を進めますか？」というメッセージを追加

### 2. タブ形式の導入

**現在:**
- カード形式で選択

**改善後:**
- タブ形式で作業グループを表示
- 選択中のタブを強調
- 各タブに進捗状況を表示（バッジ）

### 3. デフォルト選択の改善

**現在:**
- 最初の作業グループを選択

**改善後:**
- 未完了の作業グループを優先的に選択
- すべて完了している場合は、最初の作業グループを選択

### 4. 視覚的階層の改善

**現在:**
- 選択中の作業グループが少し強調されるだけ

**改善後:**
- 選択中の作業グループを大きく強調（背景色、ボーダー、影）
- 未完了の作業グループを優先表示
- 完了した作業グループはグレーアウト

---

## 実装優先度

### 高優先度（即座に実装）
1. WorkOrderListの配置改善（ヘッダーに被らないように）
2. 選択中の作業グループの強調表示
3. デフォルト選択の改善（未完了を優先）

### 中優先度（次期リリース）
1. タブ形式の導入
2. 視覚的階層の改善
3. 「どの作業を進めますか？」メッセージの追加

### 低優先度（将来検討）
1. 診断前選択画面の追加（提案1）
2. 作業グループの並び替え機能
3. 作業グループの一括操作機能

---

## まとめ

**現状の問題:**
- 複合作業の場合、診断画面で作業グループを選ぶのがわかりにくい
- ヘッダーに被って見えにくい
- ユーザーが「何をすべきか」を最初から明確に理解できない

**推奨解決策:**
- **ハイブリッドアプローチ（提案3）**を採用
- WorkOrderListを画面中央上部に大きく表示
- タブ形式で作業グループを切り替え
- 視覚的階層を改善して、選択中の作業グループを強調

**実装方針:**
- ページ数を増やさない
- 既存の実装を大きく変更しない
- ユーザーの理解を促進するUI改善に焦点を当てる

