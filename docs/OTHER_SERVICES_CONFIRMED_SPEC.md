# 「その他」業務 確認済み仕様書

## ドキュメント情報

- **作成日**: 2025-01-XX
- **バージョン**: 1.0
- **対象**: 「その他」業務の確認済み仕様
- **ステータス**: 実装準備完了

---

## 1. 確認済み事項

### 1-1. 業務フローパターン

**質問**: 業務フローパターンはどのようになりますか？

**回答**: ✅ **パターンA（入庫→診断→見積→承認→作業）を基本**

**詳細**:
- 「その他」は多様な業務を含むため、最も汎用的なパターンAを採用
- 事前見積が必要な場合は、口頭見積や簡易見積として扱う

**設計決定**:
- パターンA（入庫→診断→見積→承認→作業）を基本として実装
- 事前見積が必要な場合は、口頭見積や簡易見積として扱う

### 1-2. 診断内容

**質問**: 診断時に確認する内容について

**回答**: ✅ **カスタマイズ可能な診断項目、自由入力形式**

**設計決定**:
- 診断項目を自由に入力できる形式（カスタマイズ可能）
- 必要に応じて写真を撮影（必須ではない）
- コメントを入力

### 1-3. 見積もり

**質問**: 見積もりの作成方法について

**回答**: ✅ **カスタマイズ可能な見積項目、自由入力形式**

**設計決定**:
- 見積項目を自由に入力できる形式（カスタマイズ可能）
- 必要に応じて部品リストを追加
- 見積金額を計算

### 1-4. 作業記録

**質問**: 作業記録の記録方法について

**回答**: ✅ **自由入力形式**

**設計決定**:
- 作業内容を自由に入力できる形式
- 必要に応じて写真を撮影（必須ではない）
- 必要に応じて部品を記録
- 作業時間を記録

### 1-5. PDF生成

**質問**: PDF生成について

**回答**: ✅ **PDF生成は不要**

**設計決定**:
- 「その他」業務ではPDF生成は不要
- 作業記録はシステム内で管理

---

## 2. 確定した仕様サマリー

### 2-1. 入庫区分の設定

**入庫区分**: `その他`

**設計決定**:
- システム上は「その他」として1つの入庫区分で管理
- 業務内容の種類を自由入力で記録
- 業務内容の詳細を自由入力で記録

### 2-2. 業務フロー（パターンA）

```
1. 予約・受付: 「その他」業務の受付（3-5分）
   - 業務内容の種類を入力（自由入力）
   - 業務内容の詳細を入力（自由入力）
   - 走行距離を入力
2. 診断: 診断項目を自由に入力、必要に応じて写真を撮影（10-30分）
3. 見積作成: 見積項目を自由に入力、必要に応じて部品リストを追加（5-10分）
4. 顧客承認: 見積内容を確認して承認
5. 作業実施: 作業内容を自由に入力、必要に応じて写真を撮影（ケースバイケース）
6. 引渡: 作業内容を説明して引渡（5-10分）
```

### 2-3. 診断内容

**設計決定**:
- 診断項目を自由に入力できる形式（カスタマイズ可能）
- 必要に応じて写真を撮影（必須ではない）
- コメントを入力

### 2-4. 見積もり

**設計決定**:
- 見積項目を自由に入力できる形式（カスタマイズ可能）
- 必要に応じて部品リストを追加
- 見積金額を計算

### 2-5. 作業記録

**設計決定**:
- 作業内容を自由に入力できる形式
- 必要に応じて写真を撮影（必須ではない）
- 必要に応じて部品を記録
- 作業時間を記録

### 2-6. PDF生成

**設計決定**:
- 「その他」業務ではPDF生成は不要
- 作業記録はシステム内で管理

---

## 3. 画面設計

### 3-1. 受付画面（Phase 1）

#### 入庫処理

**設計**:
- 「その他」業務の受付
- 業務内容の種類を入力（自由入力）
- 業務内容の詳細を入力（自由入力）
- 走行距離を入力

**UI要素**:
- 業務内容の種類入力欄（自由入力）
- 業務内容の詳細入力欄（自由入力）
- 走行距離入力欄

### 3-2. 診断画面（Phase 2）

#### 診断内容の記録

**設計**:
- 診断項目を自由に入力（カスタマイズ可能）
- 必要に応じて写真を撮影
- コメントを入力

**UI要素**:
- 診断項目の追加ボタン
- 診断項目の入力欄（項目名、状態、写真、コメント）
- 写真撮影ボタン（任意）
- コメント入力欄

### 3-3. 見積作成画面（Phase 3）

#### 見積もりの作成

**設計**:
- 見積項目を自由に入力（カスタマイズ可能）
- 必要に応じて部品リストを追加
- 見積金額を計算

**UI要素**:
- 見積項目の追加ボタン
- 見積項目の入力欄（項目名、数量、単価、金額）
- 部品リストの追加ボタン（必要に応じて）
- 見積金額表示

### 3-4. 作業画面（Phase 5）

#### 作業記録

**設計**:
- 作業内容を自由に入力
- 必要に応じて写真を撮影
- 必要に応じて部品を記録
- 作業時間を記録

**UI要素**:
- 作業内容入力欄（自由入力）
- 写真撮影ボタン（任意）
- 部品入力欄（必要に応じて）
- 作業時間入力欄
- 作業メモ入力欄

### 3-5. 引渡画面（Phase 7）

#### 顧客への引渡

**設計**:
- 作業内容を説明して引渡

**UI要素**:
- 作業内容の表示
- 引渡ボタン

---

## 4. データモデル

### 4-1. 「その他」ジョブデータ

```typescript
/**
 * 「その他」ジョブ
 */
export interface OtherServiceJob {
  /** Job ID */
  jobId: string;
  /** 入庫区分 */
  serviceKind: "その他";
  
  /** 車両情報 */
  vehicle: {
    /** 車両ID */
    vehicleId: string;
    /** 走行距離 */
    mileage: number;
  };
  
  /** 業務内容 */
  serviceContent: {
    /** 業務内容の種類（自由入力） */
    type: string;
    /** 業務内容の詳細（自由入力） */
    description: string;
  };
  
  /** 診断情報 */
  diagnosis: {
    /** 診断項目（カスタマイズ可能） */
    items: CustomDiagnosisItem[];
    /** 診断写真 */
    photos: Photo[];
    /** コメント（整備士の所見） */
    comments: string;
  };
  
  /** 見積情報 */
  estimate: {
    /** 見積もり項目（カスタマイズ可能） */
    items: EstimateItem[];
    /** 部品リスト（必要に応じて） */
    parts?: PartItem[];
    /** 合計金額 */
    total: number;
    /** 承認日時 */
    approvedAt?: Date;
  };
  
  /** 作業情報 */
  work: {
    /** 作業内容（自由入力） */
    workContent: string;
    /** 作業写真 */
    photos: Photo[];
    /** 使用した部品（必要に応じて） */
    usedParts?: PartItem[];
    /** 作業時間 */
    workDuration: number;
    /** 作業メモ */
    notes: string;
  };
  
  /** ステータス */
  status: "入庫待ち" | "診断中" | "見積作成待ち" | "顧客承認待ち" | "作業待ち" | "作業中" | "出庫待ち";
}

/**
 * カスタム診断項目
 */
export interface CustomDiagnosisItem {
  /** 項目名（自由入力） */
  name: string;
  /** 状態（自由入力） */
  condition: string;
  /** 写真 */
  photo?: Photo;
  /** コメント */
  comment?: string;
}
```

---

## 5. 実装方針

### 5-1. 汎用的なフォーマット

**設計**:
- 必要最小限の構造で、多様な業務に対応
- カスタマイズ可能な診断項目・見積項目・作業項目
- 自由入力形式を基本とする

### 5-2. 柔軟な対応

**設計**:
- 業務内容に応じて、診断項目・見積項目・作業項目を動的に設定
- 必須項目は最小限に抑える
- 写真撮影、部品管理などは任意

### 5-3. シンプルなフロー

**設計**:
- 基本的なフロー（入庫→診断→見積→承認→作業→引渡）を採用
- 複雑な業務フローは避ける
- 事前見積が必要な場合は、口頭見積や簡易見積として扱う

---

## 6. 想定される「その他」業務の例

### 6-1. 洗車・ワックス

**特徴**:
- 作業時間: 30分-2時間
- 診断: 車体の状態確認
- 見積: 洗車、ワックス、内装クリーニングなどのオプション
- 作業: 洗車、ワックス、内装クリーニングなど
- PDF生成: 不要

### 6-2. 名義変更代行

**特徴**:
- 作業時間: 手続きのみ（車両預かり不要の場合もある）
- 診断: 書類の確認
- 見積: 手続き代行費用
- 作業: 書類手続き
- PDF生成: 不要

### 6-3. その他の一般的な修理

**特徴**:
- 作業時間: ケースバイケース
- 診断: 不具合の確認
- 見積: 修理費用、部品費用
- 作業: 修理作業
- PDF生成: 不要

---

## 7. 次のステップ

1. **受付画面の実装**: 業務内容の種類・詳細入力、走行距離入力
2. **診断画面の実装**: カスタマイズ可能な診断項目の入力、写真撮影
3. **見積作成画面の実装**: カスタマイズ可能な見積項目の入力、部品リスト追加
4. **作業画面の実装**: 作業内容の自由入力、写真撮影、部品記録
5. **引渡画面の実装**: 作業内容の表示、引渡処理

---

## 更新履歴

- 2025-01-XX: 初版作成（確認済み仕様書）

























