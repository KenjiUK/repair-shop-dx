# TOPページ ゼロベース設計

## 📋 概要

TOPページをゼロベースで再設計します。業務フローとUI/UXのベストプラクティスに基づいて、根本から設計し直します。

**作成日**: 2024年12月  
**目的**: 混乱した実装を整理し、明確な設計方針を確立

---

## 🔍 現状の問題点

### 1. フィルター機能の崩壊
- 統合サマリーカード内でフィルター機能が正しく動作しない
- フィルター状態の管理が複雑化
- サマリーカードとフィルターの連携が不整合

### 2. 情報の優先順位が不明確
- どの情報を最初に見せるべきか不明確
- サマリーカードの配置が混乱

### 3. 画面スペースの無駄
- 複数のカードが縦に並び、画面が長くなる
- 重要な情報（ジョブカード）が下にスクロールしないと見えない

---

## 🎯 業務フローの再確認

### 受付スタッフの典型的な1日の流れ

**朝の準備（8:00-9:00）:**
1. **本日の入出庫予定を確認**（最重要）
   - 入庫予定の確認（受付準備）
   - 出庫予定の確認（顧客連絡準備）
   - 遅延案件の早期発見

**受付業務（9:00-17:00）:**
2. **現在の作業状況を把握**
   - 各ステータスの件数を確認
   - 緊急案件の確認
   - 重要顧客の確認

3. **特定の案件を探す**
   - 顧客名で検索
   - ステータスでフィルター
   - 入庫区分でフィルター
   - 整備士でフィルター

4. **案件を処理**
   - ジョブカードをクリック
   - 詳細画面で作業

**補助的な情報確認:**
5. **代車在庫の確認**（必要時）
6. **長期プロジェクトの確認**（必要時）
7. **業務分析の確認**（管理者向け）

---

## 💡 設計原則

### 1. 情報の優先順位
1. **最重要**: 本日入出庫予定（朝の準備で最初に確認）
2. **重要**: 現在の作業状況（一目で把握）
3. **補助**: その他の情報（必要時のみ確認）

### 2. 画面スペースの効率化
- サマリー情報は最小限に
- ジョブカード一覧をできるだけ上に表示
- スクロールを最小限に

### 3. フィルター機能の明確化
- サマリーカード: 情報表示 + ワンクリックフィルター適用
- フィルターセクション: 詳細なフィルター操作
- 役割分担を明確化

### 4. 40歳以上ユーザー向け
- 大きなフォントサイズ（16px以上）
- 明確な視覚的階層
- 直感的な操作

---

## 🎨 推奨設計案

### 案1: シンプル2段構成（推奨）⭐

**構造:**
```
┌─────────────────────────────────────────┐
│ 1. 本日入出庫予定（最重要、常に表示）    │
│    [入庫予定] [出庫予定] タブ切り替え    │
└─────────────────────────────────────────┘
┌─────────────────────────────────────────┐
│ 2. フィルター + ジョブカード一覧         │
│    - 検索バー                            │
│    - フィルター（ステータス、入庫区分等） │
│    - ジョブカード一覧                    │
└─────────────────────────────────────────┘
```

**特徴:**
- 本日入出庫予定のみを上部に表示（最重要）
- その他のサマリー情報は削除（フィルターで代替）
- ジョブカード一覧をできるだけ上に表示
- シンプルで分かりやすい

**メリット:**
- ✅ 画面スペースを最大限に活用
- ✅ 情報の優先順位が明確
- ✅ フィルター機能がシンプル
- ✅ 実装が簡単

**デメリット:**
- ⚠️ 一目で全体像を把握しにくい（フィルター操作が必要）

---

### 案2: コンパクトサマリー + フィルター

**構造:**
```
┌─────────────────────────────────────────┐
│ 1. コンパクトサマリー（横並び、1行）    │
│    [入出庫予定: 12] [作業状況: 11]      │
│    [入庫区分: 8] [整備士: 5]            │
│    （クリックでフィルター適用）          │
└─────────────────────────────────────────┘
┌─────────────────────────────────────────┐
│ 2. フィルター + ジョブカード一覧         │
│    - 検索バー                            │
│    - フィルター（詳細操作）               │
│    - ジョブカード一覧                    │
└─────────────────────────────────────────┘
```

**特徴:**
- サマリー情報をコンパクトに1行で表示
- クリックでフィルター適用
- 詳細なフィルター操作は下部で

**メリット:**
- ✅ 一目で全体像を把握できる
- ✅ 画面スペースを効率的に使用
- ✅ フィルター機能が明確

**デメリット:**
- ⚠️ サマリー情報が小さく見づらい可能性

---

### 案3: タブ形式サマリー（前回の実装）

**構造:**
```
┌─────────────────────────────────────────┐
│ 1. 統合サマリーカード（タブ形式）        │
│    [入出庫] [作業状況] [入庫区分] ...    │
│    （タブで切り替え）                    │
└─────────────────────────────────────────┘
┌─────────────────────────────────────────┐
│ 2. フィルター + ジョブカード一覧         │
└─────────────────────────────────────────┘
```

**特徴:**
- 全てのサマリー情報を1つのカード内でタブ切り替え
- 画面スペースを節約

**メリット:**
- ✅ 画面スペースを最大限に節約
- ✅ 情報が1箇所に集約

**デメリット:**
- ⚠️ フィルター機能との連携が複雑
- ⚠️ タブ切り替えが必要で、一目で把握しにくい
- ⚠️ 実装が複雑

---

## 🎯 最推奨案: 案1（シンプル2段構成）⭐

### 理由

1. **業務上最重要情報を優先**
   - 本日入出庫予定を最上部に表示
   - 朝の準備で最初に確認する情報がすぐ見える

2. **シンプルで分かりやすい**
   - 情報の階層が明確
   - 40歳以上ユーザーにとって分かりやすい

3. **フィルター機能が明確**
   - サマリーカードとフィルターの役割分担が明確
   - 実装が簡単で保守しやすい

4. **画面スペースを最大限に活用**
   - ジョブカード一覧をできるだけ上に表示
   - スクロールを最小限に

### 実装内容

1. **最上部: 本日入出庫予定カード（1つだけ）**
   - タブで入庫予定と出庫予定を切り替え
   - 各項目をクリックで該当ジョブにスクロール
   - 遅延案件を視覚的に強調
   - **高さを制限**（最大5-6件表示、それ以上はスクロール）

2. **下部: フィルター + ジョブカード一覧**
   - **検索バー**（最上部）
   - **クイックフィルター**（ボタン形式）:
     - ステータス: 入庫待ち、診断待ち、見積作成待ち、作業待ち、引渡待ち
     - 入庫区分: 車検、12ヵ月点検、修理、その他
     - 整備士: 各整備士名
     - その他: 緊急案件、重要顧客、部品調達待ち
   - **アクティブフィルター表示**（バッジ形式）
   - **並び替えオプション**
   - **ジョブカード一覧**

3. **削除するもの**
   - 本日の作業状況カード（フィルターで代替）
   - 入庫区分別カード（フィルターで代替）
   - 整備士別カード（フィルターで代替）
   - 代車在庫カード（ヘッダーにボタンまたは別ページ）
   - 長期プロジェクトカード（ページ下部の別セクション）
   - 業務分析カード（ヘッダーにリンク）
   - SummaryCarousel（完全削除）
   - UnifiedSummaryCard（削除）

### フィルター機能の設計

**クイックフィルター（ボタン形式）:**
- ステータス: 入庫待ち、診断待ち、見積作成待ち、作業待ち、引渡待ち
- 入庫区分: 車検、12ヵ月点検、修理、その他（ドロップダウンまたはボタン）
- 整備士: 各整備士名（ドロップダウン）
- その他: 緊急案件、重要顧客、部品調達待ち（トグルボタン）

**フィルターの動作:**
- クリックでフィルター適用
- 複数のフィルターを組み合わせ可能
- アクティブフィルターをバッジで表示
- 「すべてクリア」ボタンでリセット

---

## 📊 比較表

| 項目 | 案1（シンプル2段） | 案2（コンパクトサマリー） | 案3（タブ形式） |
|------|-----------------|----------------------|---------------|
| **業務効率** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **情報の可視性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **一目で状況把握** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| **画面スペース** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **フィルター機能** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ |
| **実装の簡単さ** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ |
| **40歳以上ユーザー向け** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |

---

## ✅ 結論

**推奨: 案1（シンプル2段構成）⭐**

### 実装方針

1. **最上部: 本日入出庫予定カードのみ**
   - タブで入庫予定と出庫予定を切り替え
   - 各項目をクリックで該当ジョブにスクロール

2. **下部: フィルター + ジョブカード一覧**
   - 検索バー
   - フィルターセクション（ステータス、入庫区分、整備士など）
   - ジョブカード一覧

3. **削除するもの**
   - その他のサマリーカード（フィルターで代替）
   - SummaryCarousel

### 理由

- ✅ 業務上最重要情報（入出庫予定）が最上部に表示
- ✅ シンプルで分かりやすい
- ✅ フィルター機能が明確で実装が簡単
- ✅ 画面スペースを最大限に活用
- ✅ 40歳以上ユーザーにとって分かりやすい

---

## 🔧 実装手順

1. **現状の実装を確認**
   - フィルター機能の状態を確認
   - 各コンポーネントの依存関係を確認

2. **本日入出庫予定カードの実装**
   - タブ形式で入庫予定と出庫予定を切り替え
   - 各項目のクリック処理

3. **フィルターセクションの強化**
   - ステータスフィルターを追加
   - 入庫区分フィルターを追加
   - 整備士フィルターを追加

4. **不要なコンポーネントの削除**
   - その他のサマリーカードを削除
   - SummaryCarouselを削除

5. **動作確認**
   - フィルター機能の動作確認
   - スクロール動作の確認

---

## 📝 補足

### 代車在庫の表示方法

- **オプション1**: 別ページ（`/courtesy-cars`）で表示
- **オプション2**: モーダルダイアログで表示（ヘッダーにボタン）
- **オプション3**: フィルターセクションに「代車使用中」フィルターを追加

### 長期プロジェクトの表示方法

- **オプション1**: 別セクション（ページ下部）で表示
- **オプション2**: フィルターで「長期プロジェクト」を選択可能にする

### 業務分析の表示方法

- **オプション1**: ヘッダーにリンクを追加
- **オプション2**: フィルターセクションにリンクを追加

---

## 🎯 次のステップ

1. この設計案を確認
2. 承認後、実装を開始
3. 段階的に実装（まず本日入出庫予定カード、次にフィルター強化）

