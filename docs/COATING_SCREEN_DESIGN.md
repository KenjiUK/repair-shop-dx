# コーティング 画面設計書

## ドキュメント情報

- **作成日**: 2025-01-XX
- **バージョン**: 1.0
- **対象**: コーティングの各画面の詳細設計
- **設計方針**: 世界最高のUI/UX、ITコンサルの目線での推奨を元に設計
- **業務フローパターン**: パターンB（事前見積→承認→入庫→作業）
- **注意**: 3種類の基本コーティング、7種類のオプションサービス（同時施工で10％割引）、車両の寸法による金額計算、数日預ける（乾燥時間）

---

## 1. 画面一覧

### 1-1. フロントスタッフ向け画面

1. **事前見積画面** (`/admin/pre-estimate/[id]`)
   - 車両の寸法確認
   - コーティングの種類選択（3種類）
   - オプションサービス選択（7種類、同時施工で10％割引）
   - 見積金額の自動計算
   - 顧客への送信

2. **受付画面** (`/admin/reception/[id]`)
   - 承認済みの見積内容の確認
   - 走行距離の入力
   - 前回コーティング履歴の表示

### 1-2. 整備士向け画面

1. **診断画面** (`/mechanic/diagnosis/[id]`)
   - 車体の状態確認（傷・キズ、汚れ、コーティング可能箇所）
   - 車両の寸法確認（金額計算用）
   - 既存コーティングの状態確認（既にコーティング済みの場合）
   - Before写真撮影

2. **作業画面** (`/mechanic/work/[id]`)
   - 作業記録の入力
   - Before/After写真の撮影
   - 使用したコーティング剤の記録
   - 作業時間の記録

### 1-3. 特徴

- **事前見積**: 入庫前に見積もりを提示し、顧客の承認を得てから入庫
- **コーティングの種類**: ハイモースコート エッジ、ハイモースコート グロウ、ガードグレイズ（3種類）
- **オプションサービス**: 7種類のオプション（同時施工で10％割引）
- **車両の寸法による金額計算**: マスタデータから取得
- **下地処理**: コーティング費用に含まれる
- **乾燥時間**: 数日預ける（ステータス管理で「乾燥中」を管理）
- **所要時間**: 数日（乾燥時間を含む）

---

## 2. 事前見積画面の詳細設計

### 2-1. 画面構成

#### レイアウト構造

```
┌─────────────────────────────────────────┐
│ [←] 田中様 BMW X3 コーティング事前見積    │
├─────────────────────────────────────────┤
│ 📋 車両情報（自動入力済み・編集不可）     │
│ ┌─────────────────────────────────────┐ │
│ │ 登録番号: 堺 330 す 1669            │ │
│ │ 車台番号: VF3CUHNZTHY061316         │ │
│ │ 車両の寸法: 中型（金額計算用）       │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 🎨 コーティングの種類選択                │
│ ┌─────────────────────────────────────┐ │
│ │ 基本コーティング:                   │ │
│ │                                      │ │
│ │ ○ ハイモースコート エッジ           │ │
│ │   参考価格: ¥88,000～               │ │
│ │   （車両の寸法により変動）          │ │
│ │                                      │ │
│ │ ○ ハイモースコート グロウ           │ │
│ │   参考価格: ¥88,000～               │ │
│ │   （車両の寸法により変動）          │ │
│ │                                      │ │
│ │ ○ ガードグレイズ                    │ │
│ │   参考価格: ¥81,400～               │ │
│ │   （車両の寸法により変動）          │ │
│ │                                      │ │
│ │ （選択された種類の金額を表示）       │ │
│ │ 基本コーティング: ¥90,000            │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ ✨ オプションサービス（同時施工で10％割引）│
│ ┌─────────────────────────────────────┐ │
│ │ [ ] ホイールコーティング（4本セット）│ │
│ │     通常価格: ¥26,400               │ │
│ │     同時施工価格: ¥23,760           │ │
│ │                                      │ │
│ │ [ ] ウィンドウ撥水（フロント三面）   │ │
│ │     通常価格: ¥25,000               │ │
│ │     同時施工価格: ¥22,500           │ │
│ │                                      │ │
│ │ [ ] ヘッドライト研磨・クリアコート   │ │
│ │     （左右2個）                      │ │
│ │     通常価格: ¥66,000               │ │
│ │     同時施工価格: ¥59,400           │ │
│ │                                      │ │
│ │ [ ] インテリアクリーニング           │ │
│ │     通常価格: ¥39,000               │ │
│ │     同時施工価格: ¥35,100           │ │
│ │                                      │ │
│ │ [ ] バンパーコート（1本）            │ │
│ │     通常価格: ¥15,000               │ │
│ │     同時施工価格: ¥13,500           │ │
│ │                                      │ │
│ │ [ ] ウィンドウフィルム（1面）        │ │
│ │     （前面・前側面不可）             │ │
│ │     通常価格: ¥24,000               │ │
│ │     同時施工価格: ¥21,600           │ │
│ │                                      │ │
│ │ [ ] 幌コーティング                   │ │
│ │     通常価格: ¥48,000               │ │
│ │     同時施工価格: ¥43,200           │ │
│ │                                      │ │
│ │ （基本コーティングと同時施工の場合、  │ │
│ │   すべてのオプションに10％割引を適用）│ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 💰 見積内訳                              │
│ ┌─────────────────────────────────────┐ │
│ │ 基本コーティング: ¥90,000            │ │
│ │                                      │ │
│ │ オプション:                          │ │
│ │ ホイールコーティング: ¥23,760       │ │
│ │ ウィンドウ撥水: ¥22,500             │ │
│ │ ──────────────────────────────── │ │
│ │ オプション合計: ¥46,260             │ │
│ │                                      │ │
│ │ ──────────────────────────────── │ │
│ │ 合計: ¥136,260                      │ │
│ │                                      │ │
│ │ （下地処理はコーティング費用に含まれる）│ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 📝 注意事項                              │
│ ┌─────────────────────────────────────┐ │
│ │ • 乾燥時間は数日かかります           │ │
│ │ • 車両を預ける必要があります         │ │
│ │ • 効果の持続期間は1年から3年です     │ │
│ └─────────────────────────────────────┘ │
│                                          │
│ [一時保存] [顧客に送信]                 │
└─────────────────────────────────────────┘
```

### 2-2. コンポーネント設計

#### 2-2-1. 車両情報カード

**目的**: 見積対象の車両情報を表示（誤操作防止のため編集不可）

**表示項目**:
- 依頼者(使用者)の氏名又は名称
- 車名及び型式
- 自動車登録番号又は車両番号
- 車台番号
- 車両の寸法（金額計算用）

**データソース**: Google Sheets「【DB】車両マスタ」から自動取得

**UI/UXのポイント**:
- 背景色を薄くして、編集不可であることを視覚的に示す
- アイコン（🔒）で編集不可であることを示す
- 車両の寸法を表示（金額計算用）

#### 2-2-2. コーティングの種類選択セクション

**目的**: 基本コーティングの種類を選択

**選択可能な種類**:
1. ハイモースコート エッジ: 参考価格 ¥88,000～（車両の寸法により変動）
2. ハイモースコート グロウ: 参考価格 ¥88,000～（車両の寸法により変動）
3. ガードグレイズ: ¥81,400～（車両の寸法により変動）

**UI/UXのポイント**:
- ラジオボタンで選択（1つのみ選択可能）
- 参考価格を表示（車両の寸法により変動することを明記）
- 選択された種類の金額をマスタデータから取得して表示
- 選択後、見積内訳を自動更新

#### 2-2-3. オプションサービス選択セクション

**目的**: オプションサービスを選択（同時施工で10％割引）

**選択可能なオプション**:
1. ホイールコーティング（4本セット）: ¥26,400 → ¥23,760（同時施工時）
2. ウィンドウ撥水（フロント三面）: ¥25,000 → ¥22,500（同時施工時）
3. ヘッドライト研磨・クリアコート（左右2個）: ¥66,000 → ¥59,400（同時施工時）
4. インテリアクリーニング: ¥39,000 → ¥35,100（同時施工時）
5. バンパーコート（1本）: ¥15,000 → ¥13,500（同時施工時）
6. ウィンドウフィルム（1面、前面・前側面不可）: ¥24,000 → ¥21,600（同時施工時）
7. 幌コーティング: ¥48,000 → ¥43,200（同時施工時）

**同時施工判定**:
- 基本コーティングとオプションサービスを同じ入庫（同じワークオーダー）で実施する場合、すべてのオプションに10％割引を適用

**UI/UXのポイント**:
- チェックボックスで選択（複数選択可能）
- 通常価格と同時施工価格を両方表示
- 同時施工価格を強調表示（緑色、太字）
- 選択後、見積内訳を自動更新
- 割引額を明示（「10％割引適用」と表示）

#### 2-2-4. 見積内訳表示

**目的**: 見積内訳を明確に表示

**表示内容**:
- 基本コーティング金額（車両の寸法に応じた金額）
- オプション合計金額（同時施工価格、10％割引適用後）
- 合計金額

**UI/UXのポイント**:
- 基本コーティング金額を明示
- オプション合計金額を明示（同時施工価格）
- 合計金額を大きく表示
- 「下地処理はコーティング費用に含まれる」と明記
- 金額は自動計算（リアルタイム更新）

#### 2-2-5. 注意事項表示

**目的**: 重要な注意事項を表示

**表示内容**:
- 乾燥時間は数日かかる
- 車両を預ける必要がある
- 効果の持続期間は1年から3年

**UI/UXのポイント**:
- 重要な注意事項を明確に表示
- アイコン（⚠️）で注意を喚起
- 顧客が理解しやすい表現

#### 2-2-6. 一時保存ボタン

**目的**: 現在の入力内容を保存（自動保存も実施）

**UI/UXのポイント**:
- 保存成功時にトースト通知
- オフライン時も保存可能（ローカルストレージ）
- 自動保存も実施（30秒ごと、または項目変更時）

#### 2-2-7. 顧客に送信ボタン

**目的**: 見積もりを顧客に送信

**UI/UXのポイント**:
- 基本コーティングが選択されていない場合、警告を表示
- 見積内容を確認
- 顧客に送信（メール等）
- 送信成功時にトースト通知
- ステータスを「顧客承認待ち」に更新

### 2-3. データフロー

```
1. 画面読み込み
   ↓
2. 車両情報を取得（Google Sheets）
   ↓
3. 車両の寸法を取得（Google Sheets）
   ↓
4. マスタデータから金額を取得（車両の寸法に応じた金額）
   ↓
5. 既存の事前見積内容を取得（Zoho CRM）
   ↓
6. フロントスタッフがコーティングの種類を選択
   ↓
7. 選択された種類の金額をマスタデータから取得して表示
   ↓
8. フロントスタッフがオプションサービスを選択
   ↓
9. 同時施工価格を自動計算（10％割引）
   ↓
10. 見積内訳を自動更新
   ↓
11. 自動保存（30秒ごと、または項目変更時）
   ↓
12. 顧客に送信ボタンをタップ
   ↓
13. 事前見積内容を保存（Zoho CRM）
   ↓
14. 顧客に送信（メール等）
   ↓
15. ステータスを「顧客承認待ち」に更新
```

### 2-4. インタラクション設計

#### 2-4-1. コーティングの種類選択

- **タップ**: ラジオボタンで選択
- **選択後**: 選択された種類の金額をマスタデータから取得して表示
- **変更**: 別の種類を選択すると、見積内訳を自動更新

#### 2-4-2. オプションサービス選択

- **チェック**: チェックボックスで選択
- **選択後**: 同時施工価格を自動計算（10％割引）、見積内訳を自動更新
- **解除**: チェックを外すと、見積内訳を自動更新

#### 2-4-3. エラーハンドリング

- **ネットワークエラー**: オフライン時はローカルストレージに保存、オンライン時に自動同期
- **保存エラー**: エラーメッセージを表示、再試行ボタンを表示

### 2-5. 状態管理

- **ローディング**: 車両情報取得中、マスタデータ取得中、事前見積内容保存中
- **エラー**: ネットワークエラー、保存エラー
- **成功**: 事前見積送信完了、ステータス更新完了

---

## 3. 受付画面の詳細設計

### 3-1. 画面構成

#### レイアウト構造

```
┌─────────────────────────────────────────┐
│ [←] 田中様 BMW X3 コーティング受付        │
├─────────────────────────────────────────┤
│ 📋 車両情報（自動入力済み・編集不可）     │
│ ┌─────────────────────────────────────┐ │
│ │ 登録番号: 堺 330 す 1669            │ │
│ │ 車台番号: VF3CUHNZTHY061316         │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 💰 承認済み見積内容                      │
│ ┌─────────────────────────────────────┐ │
│ │ 基本コーティング:                   │ │
│ │ ハイモースコート エッジ             │ │
│ │ ¥90,000                             │ │
│ │                                      │ │
│ │ オプション:                          │ │
│ │ • ホイールコーティング: ¥23,760     │ │
│ │ • ウィンドウ撥水: ¥22,500           │ │
│ │                                      │ │
│ │ 合計: ¥136,260                      │ │
│ │                                      │ │
│ │ 承認日時: 2025年1月15日 10:00       │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 📏 走行距離                              │
│ ┌─────────────────────────────────────┐ │
│ │ 現在の走行距離: [____] km            │ │
│ │                                      │ │
│ │ 前回コーティング履歴:                │ │
│ │ 2023年5月: ハイモースコート エッジ │ │
│ │ 走行距離: 15,000km                   │ │
│ └─────────────────────────────────────┘ │
│                                          │
│ [一時保存] [受付完了]                    │
└─────────────────────────────────────────┘
```

### 3-2. コンポーネント設計

#### 3-2-1. 車両情報カード

**目的**: 受付対象の車両情報を表示（誤操作防止のため編集不可）

**表示項目**: 事前見積画面と同様

**データソース**: Google Sheets「【DB】車両マスタ」から自動取得

#### 3-2-2. 承認済み見積内容表示

**目的**: 承認済みの見積内容を表示（参考用）

**表示内容**:
- 基本コーティングの種類と金額
- 選択されたオプションと金額（同時施工価格）
- 合計金額
- 承認日時

**UI/UXのポイント**:
- 読み取り専用（編集不可）
- 背景色を薄くして、参考情報であることを示す
- 事前見積画面から自動で引き継ぎ
- 承認日時を表示

#### 3-2-3. 走行距離入力欄

**目的**: 現在の走行距離を記録

**入力項目**:
- 現在の走行距離（km）

**UI/UXのポイント**:
- 数字キーパッドを表示（テンキー）
- 前回コーティング履歴を表示（参考情報）
- 走行距離の異常値をチェック（リアルタイムバリデーション）

#### 3-2-4. 一時保存ボタン

**目的**: 現在の入力内容を保存（自動保存も実施）

**UI/UXのポイント**:
- 保存成功時にトースト通知
- オフライン時も保存可能（ローカルストレージ）
- 自動保存も実施（30秒ごと、または項目変更時）

#### 3-2-5. 受付完了ボタン

**目的**: 受付を完了し、診断画面への遷移を可能にする

**UI/UXのポイント**:
- 走行距離が未入力の場合、警告を表示
- 確認ダイアログを表示（任意）
- 完了後、診断画面への遷移を可能にする
- ステータスを「診断中」に更新

### 3-3. データフロー

```
1. 画面読み込み
   ↓
2. 車両情報を取得（Google Sheets）
   ↓
3. 承認済み見積内容を取得（Zoho CRM）
   ↓
4. 前回コーティング履歴を取得（Zoho CRM）
   ↓
5. 既存の受付情報を取得（Zoho CRM）
   ↓
6. フロントスタッフが走行距離を入力
   ↓
7. 自動保存（30秒ごと、または項目変更時）
   ↓
8. 受付完了ボタンをタップ
   ↓
9. 受付情報を保存（Zoho CRM）
   ↓
10. ステータスを「診断中」に更新
   ↓
11. 診断画面への遷移を可能にする
```

### 3-4. インタラクション設計

#### 3-4-1. 走行距離入力

- **タップ**: 数字キーパッドを表示
- **入力**: 数値を入力
- **バリデーション**: リアルタイムで異常値をチェック

#### 3-4-2. エラーハンドリング

- **ネットワークエラー**: オフライン時はローカルストレージに保存、オンライン時に自動同期
- **保存エラー**: エラーメッセージを表示、再試行ボタンを表示

### 3-5. 状態管理

- **ローディング**: 車両情報取得中、受付情報保存中
- **エラー**: ネットワークエラー、保存エラー
- **成功**: 受付完了、診断画面への遷移可能

---

## 4. 診断画面の詳細設計

### 4-1. 画面構成

#### レイアウト構造

```
┌─────────────────────────────────────────┐
│ [←] 田中様 BMW X3 コーティング診断        │
│ 整備士: 中村                             │
├─────────────────────────────────────────┤
│ 📋 車両情報（自動入力済み・編集不可）     │
│ ┌─────────────────────────────────────┐ │
│ │ 登録番号: 堺 330 す 1669            │ │
│ │ 車台番号: VF3CUHNZTHY061316         │ │
│ │ 車両の寸法: 中型（金額計算用）       │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 💰 承認済み見積内容（受付画面から引き継ぎ）│
│ ┌─────────────────────────────────────┐ │
│ │ 基本コーティング:                   │ │
│ │ ハイモースコート エッジ             │ │
│ │                                      │ │
│ │ オプション:                          │ │
│ │ • ホイールコーティング              │ │
│ │ • ウィンドウ撥水                    │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 🔍 車体の状態確認                        │
│ 進捗: ████████░░ 4/5箇所完了 (80%)    │
│                                          │
│ ┌─────────────────────────────────────┐ │
│ │ 1. フロントバンパー                  │ │
│ │ ─────────────────────────────────── │ │
│ │ 状態:                                │ │
│ │ [良好] [軽微な傷] [中程度の傷]      │ │
│ │ [深刻な傷] [汚れあり] [コーティング残存]│ │
│ │                                      │ │
│ │ [📷 写真を追加] [💬 コメント]       │ │
│ └─────────────────────────────────────┘ │
│                                          │
│ ┌─────────────────────────────────────┐ │
│ │ 2. リアバンパー                      │ │
│ │ ─────────────────────────────────── │ │
│ │ 状態: [良好] [軽微な傷] [中程度の傷]│ │
│ │                                      │ │
│ │ [📷 写真を追加] [💬 コメント]       │ │
│ └─────────────────────────────────────┘ │
│                                          │
│ （車体の各箇所を確認）                   │
├─────────────────────────────────────────┤
│ 🩹 傷・キズの記録                        │
│ ┌─────────────────────────────────────┐ │
│ │ [＋傷・キズを追加]                   │ │
│ │                                      │ │
│ │ ┌────────────────────────────────┐ │ │
│ │ │ 位置: フロントバンパー左側       │ │ │
│ │ │ 程度: [軽微] [中程度] [深刻]   │ │ │
│ │ │ [📷 写真] [💬 コメント]         │ │ │
│ │ │ [削除]                           │ │ │
│ │ └────────────────────────────────┘ │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 🎨 既存コーティングの状態確認            │
│ ┌─────────────────────────────────────┐ │
│ │ 既存コーティング:                    │ │
│ │ [ ] 既にコーティング済み             │ │
│ │                                      │ │
│ │ （既にコーティング済みの場合）       │ │
│ │ 種類: [ハイモースコート エッジ]     │ │
│ │ 施工日: [2023年5月]                 │ │
│ │ 状態: [良好] [劣化] [剥がれ]        │ │
│ │                                      │ │
│ │ [📷 写真を追加]                     │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 📸 Before写真                            │
│ ┌─────────────────────────────────────┐ │
│ │ [📷 写真を追加]                      │ │
│ │                                      │ │
│ │ [写真1] [写真2] [写真3]              │ │
│ │ （サムネイル表示、タップで拡大）     │ │
│ │                                      │ │
│ │ 推奨: 車体全体（前・後・左・右）     │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 💬 整備士の所見                          │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │  車体の状態や所見を記録              │ │
│ │  （複数行入力可能）                  │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                          │
│ [一時保存] [診断完了]                    │
└─────────────────────────────────────────┘
```

### 4-2. コンポーネント設計

#### 4-2-1. 車両情報カード

**目的**: 診断対象の車両情報を表示（誤操作防止のため編集不可）

**表示項目**: 受付画面と同様

**データソース**: Google Sheets「【DB】車両マスタ」から自動取得

#### 4-2-2. 承認済み見積内容表示

**目的**: 承認済みの見積内容を表示（参考用）

**表示内容**:
- 基本コーティングの種類
- 選択されたオプション

**UI/UXのポイント**:
- 読み取り専用（編集不可）
- 背景色を薄くして、参考情報であることを示す
- 受付画面から自動で引き継ぎ

#### 4-2-3. 車体の状態確認カード（動的）

**目的**: 車体の各箇所の状態を確認・記録

**確認箇所例**:
- フロントバンパー
- リアバンパー
- 左側面
- 右側面
- ルーフ
- その他

**状態選択**:
- 良好
- 軽微な傷
- 中程度の傷
- 深刻な傷
- 汚れあり
- コーティング残存

**UI/UXのポイント**:
- 車体の各箇所をカードとして表示
- ボタンは画面幅いっぱいに配置（タッチしやすい）
- 選択された状態は明確に表示（背景色、アイコン）
- 写真ボタンは撮影済みの場合、サムネイルを表示
- コメントがある場合、アイコンで表示
- 各箇所は独立したカードとして表示（視認性向上）

#### 4-2-4. 傷・キズの記録セクション

**目的**: 傷・キズの位置・程度を記録

**機能**:
- 傷・キズの追加（「＋傷・キズを追加」ボタン）
- 位置の入力
- 程度の選択（軽微/中程度/深刻）
- 写真の撮影
- コメントの入力
- 傷・キズの削除

**UI/UXのポイント**:
- 複数の傷・キズを追加可能
- 位置はテキスト入力またはドロップダウン選択
- 程度はラジオボタンまたはドロップダウン選択
- 写真は必須（推奨）
- 傷・キズの削除は確認ダイアログ表示

#### 4-2-5. 既存コーティングの状態確認セクション

**目的**: 既存コーティングの状態を確認（既にコーティング済みの場合）

**機能**:
- 既存コーティングの有無を選択（チェックボックス）
- 既存コーティングの種類を入力
- 施工日を入力
- 状態を選択（良好/劣化/剥がれ）
- 写真の撮影

**UI/UXのポイント**:
- 既存コーティングがある場合のみ、詳細を入力可能
- 種類はテキスト入力またはドロップダウン選択
- 施工日は日付選択
- 状態はラジオボタンまたはドロップダウン選択

#### 4-2-6. Before写真セクション

**目的**: コーティング前の車体の状態を記録

**撮影推奨**:
- 車体全体（前・後・左・右）
- 傷・キズ箇所の接写
- 汚れ箇所の接写

**UI/UXのポイント**:
- 写真ボタンは大きく表示（タッチしやすい）
- 撮影済みの場合、サムネイルを表示
- サムネイルをタップすると拡大表示
- 複数枚撮影可能（推奨: 4枚以上）
- 写真の削除機能
- 撮影推奨内容を表示

#### 4-2-7. 整備士の所見入力欄

**目的**: 整備士の所見を記録

**機能**:
- 複数行入力可能
- 文字数制限なし（ただし、システムの制限内）

**UI/UXのポイント**:
- テキストエリアで入力
- プレースホルダーで入力例を表示

#### 4-2-8. 進捗バー

**目的**: 診断の進捗を可視化

**表示内容**:
- 完了箇所数 / 全箇所数（車体の箇所に応じて動的）
- 進捗パーセンテージ
- プログレスバー（視覚的）

**UI/UXのポイント**:
- 色で進捗を表現（0-50%: 赤、50-80%: 黄、80-100%: 緑）
- 数値と視覚的表現の両方で進捗を表示
- 車体の箇所に応じて箇所数が変動

#### 4-2-9. 一時保存ボタン

**目的**: 現在の入力内容を保存（自動保存も実施）

**UI/UXのポイント**:
- 保存成功時にトースト通知
- オフライン時も保存可能（ローカルストレージ）
- 自動保存も実施（30秒ごと、または項目変更時）

#### 4-2-10. 診断完了ボタン

**目的**: 診断を完了し、作業画面への遷移を可能にする

**UI/UXのポイント**:
- 全ての箇所が完了していない場合、警告を表示（任意）
- Before写真が撮影されていない場合、警告を表示（推奨）
- 確認ダイアログを表示
- 完了後、作業画面への遷移を可能にする
- ステータスを「作業待ち」に更新

### 4-3. データフロー

```
1. 画面読み込み
   ↓
2. 車両情報を取得（Google Sheets）
   ↓
3. 承認済み見積内容を取得（Zoho CRM）
   ↓
4. 既存の診断結果を取得（Zoho CRM）
   ↓
5. 整備士が各箇所の状態を選択
   ↓
6. 傷・キズを記録
   ↓
7. 既存コーティングの状態を確認（該当する場合）
   ↓
8. Before写真を撮影
   ↓
9. 自動保存（30秒ごと、または項目変更時）
   ↓
10. 診断完了ボタンをタップ
   ↓
11. 診断結果を保存（Zoho CRM）
   ↓
12. 写真をアップロード（Google Drive）
   ↓
13. ステータスを「作業待ち」に更新
   ↓
14. 作業画面への遷移を可能にする
```

### 4-4. インタラクション設計

#### 4-4-1. 車体の状態選択

- **タップ**: 状態を選択
- **選択済み**: 背景色とアイコンで明確に表示
- **変更**: 別の状態をタップすると、前の選択が解除され、新しい状態が選択される

#### 4-4-2. 傷・キズの追加

- **タップ**: 「＋傷・キズを追加」ボタンをタップ
- **入力**: 位置・程度を入力
- **写真**: 写真を撮影
- **削除**: 傷・キズを削除（確認ダイアログ表示）

#### 4-4-3. 既存コーティングの確認

- **チェック**: 既存コーティングの有無を選択
- **選択後**: 既存コーティングがある場合、詳細を入力可能

#### 4-4-4. 写真撮影

- **タップ**: カメラを起動
- **撮影**: 写真を撮影
- **確認**: 撮影後、確認画面を表示（再撮影可能）
- **保存**: 確認後、写真を保存（Google Drive）
- **表示**: 撮影済みの場合、サムネイルを表示
- **拡大**: サムネイルをタップすると拡大表示
- **削除**: 写真を削除（確認ダイアログ表示）

#### 4-4-5. エラーハンドリング

- **ネットワークエラー**: オフライン時はローカルストレージに保存、オンライン時に自動同期
- **保存エラー**: エラーメッセージを表示、再試行ボタンを表示
- **写真アップロードエラー**: エラーメッセージを表示、再アップロードボタンを表示

### 4-5. 状態管理

- **ローディング**: 車両情報取得中、診断結果保存中、写真アップロード中
- **エラー**: ネットワークエラー、保存エラー、写真アップロードエラー
- **成功**: 診断完了、作業画面への遷移可能

---

## 5. 作業画面の詳細設計

### 5-1. 画面構成

#### レイアウト構造

```
┌─────────────────────────────────────────┐
│ [←] 田中様 BMW X3 コーティング作業        │
│ 整備士: 中村                             │
├─────────────────────────────────────────┤
│ 📋 車両情報（自動入力済み・編集不可）     │
│ ┌─────────────────────────────────────┐ │
│ │ 登録番号: 堺 330 す 1669            │ │
│ │ 車台番号: VF3CUHNZTHY061316         │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 💰 承認済み見積内容（診断画面から引き継ぎ）│
│ ┌─────────────────────────────────────┐ │
│ │ 基本コーティング:                   │ │
│ │ ハイモースコート エッジ             │ │
│ │                                      │ │
│ │ オプション:                          │ │
│ │ • ホイールコーティング              │ │
│ │ • ウィンドウ撥水                    │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 🔍 診断結果（診断画面から引き継ぎ）      │
│ ┌─────────────────────────────────────┐ │
│ │ 車体の状態: 良好                     │ │
│ │ 傷・キズ: 軽微な傷1箇所             │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 📝 作業記録                              │
│ ┌─────────────────────────────────────┐ │
│ │ 実施した作業:                        │ │
│ │                                     │ │
│ │  1. 洗車・下地処理                   │ │
│ │  2. コーティング剤塗布               │ │
│ │  3. 乾燥・仕上げ                     │ │
│ │                                     │ │
│ │  （複数行入力可能）                  │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 🎨 使用したコーティング剤                │
│ ┌─────────────────────────────────────┐ │
│ │ [＋コーティング剤を追加]             │ │
│ │                                      │ │
│ │ ┌────────────────────────────────┐ │ │
│ │ │ ハイモースコート エッジ          │ │ │
│ │ │ 使用量: [1] 本                  │ │ │
│ │ │ メーカー: [ハイモース]           │ │ │
│ │ │ 型番:    [EDGE-500]             │ │ │
│ │ │ [削除]                           │ │ │
│ │ └────────────────────────────────┘ │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ ⏱️ 作業時間                              │
│ ┌─────────────────────────────────────┐ │
│ │ 作業開始日時: [2025-01-15 09:00]   │ │
│ │ 作業完了日時: [2025-01-15 17:00]   │ │
│ │                                      │ │
│ │ 作業時間: 8時間                     │ │
│ │                                      │ │
│ │ （乾燥時間は別途数日かかります）     │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 📸 Before/After写真                      │
│                                          │
│ ┌─────────────────────────────────────┐ │
│ │ Before: コーティング前の状態         │ │
│ │ [📷 写真を追加]                      │ │
│ │                                      │ │
│ │ [写真1] [写真2] [写真3]              │ │
│ │ （サムネイル表示、タップで拡大）     │ │
│ └─────────────────────────────────────┘ │
│                                          │
│ ┌─────────────────────────────────────┐ │
│ │ After: コーティング後の状態          │ │
│ │ [📷 写真を追加]                     │ │
│ │                                      │ │
│ │ [写真1] [写真2] [写真3]              │ │
│ │ （サムネイル表示、タップで拡大）     │ │
│ │                                      │ │
│ │ 推奨: 車体全体（前・後・左・右）、   │ │
│ │       撥水性の確認                  │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 💬 作業メモ                              │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │  作業に関する自由記述                │ │
│ │  （複数行入力可能）                  │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                          │
│ [一時保存] [作業完了]                    │
└─────────────────────────────────────────┘
```

### 5-2. コンポーネント設計

#### 5-2-1. 車両情報カード

**目的**: 作業対象の車両情報を表示（誤操作防止のため編集不可）

**表示項目**: 診断画面と同様

**データソース**: Google Sheets「【DB】車両マスタ」から自動取得

#### 5-2-2. 承認済み見積内容表示

**目的**: 承認済みの見積内容を表示（参考用）

**表示内容**: 診断画面と同様

**UI/UXのポイント**: 診断画面と同様

#### 5-2-3. 診断結果表示

**目的**: 診断画面で入力した診断結果を表示（参考用）

**表示内容**:
- 車体の状態
- 傷・キズの有無・程度

**UI/UXのポイント**:
- 読み取り専用（編集不可）
- 背景色を薄くして、参考情報であることを示す
- 診断画面から自動で引き継ぎ

#### 5-2-4. 作業記録入力欄

**目的**: 実施した作業の詳細を記録

**機能**:
- 複数行入力可能
- 文字数制限なし（ただし、システムの制限内）

**UI/UXのポイント**:
- テキストエリアで入力
- プレースホルダーで入力例を表示
- 作業の流れを記録（洗車・下地処理・コーティング剤塗布・乾燥・仕上げ）

#### 5-2-5. 使用したコーティング剤セクション

**目的**: 使用したコーティング剤を記録

**機能**:
- コーティング剤の追加（「＋コーティング剤を追加」ボタン）
- 種類の入力
- 使用量の入力
- メーカー・型番の入力
- コーティング剤の削除

**UI/UXのポイント**:
- 複数のコーティング剤を追加可能
- 種類はテキスト入力またはドロップダウン選択
- 使用量は数字キーパッドを表示
- メーカー・型番はテキスト入力

#### 5-2-6. 作業時間セクション

**目的**: 作業時間を記録

**機能**:
- 作業開始日時の入力
- 作業完了日時の入力
- 作業時間の自動計算

**UI/UXのポイント**:
- 日時選択UIを使用
- 作業時間を自動計算
- 「乾燥時間は別途数日かかります」と明記

#### 5-2-7. Before/After写真セクション

**目的**: 作業前後の写真を撮影・表示

**Before写真**:
- **目的**: コーティング前の車体の状態を記録
- **撮影タイミング**: 作業を開始する前
- **撮影推奨**: 車体全体（前・後・左・右）、傷・キズ箇所の接写

**After写真**:
- **目的**: コーティング後の車体の状態を記録
- **撮影タイミング**: コーティングを完了した後
- **撮影推奨**: 車体全体（前・後・左・右）、撥水性の確認

**UI/UXのポイント**:
- 写真ボタンは大きく表示（タッチしやすい）
- 撮影済みの場合、サムネイルを表示
- サムネイルをタップすると拡大表示
- 複数枚撮影可能（推奨: 4枚以上）
- 写真の削除機能
- 撮影推奨内容を表示

#### 5-2-8. 作業メモ入力欄

**目的**: 作業に関する自由記述

**機能**:
- 複数行入力可能
- 文字数制限なし（ただし、システムの制限内）

**UI/UXのポイント**:
- テキストエリアで入力
- プレースホルダーで入力例を表示

#### 5-2-9. 一時保存ボタン

**目的**: 現在の入力内容を保存（自動保存も実施）

**UI/UXのポイント**:
- 保存成功時にトースト通知
- オフライン時も保存可能（ローカルストレージ）
- 自動保存も実施（30秒ごと、または項目変更時）

#### 5-2-10. 作業完了ボタン

**目的**: 作業を完了し、乾燥期間に入る

**UI/UXのポイント**:
- Before/After写真が撮影されていない場合、警告を表示（推奨）
- 作業記録が未入力の場合、警告を表示（推奨）
- 確認ダイアログを表示
- 完了後、フロントスタッフに通知
- ステータスを「乾燥中」に更新
- 乾燥完了後、「出庫待ち」ステータスに更新（手動または自動）

### 5-3. データフロー

```
1. 画面読み込み
   ↓
2. 車両情報を取得（Google Sheets）
   ↓
3. 承認済み見積内容を取得（Zoho CRM）
   ↓
4. 診断結果を取得（Zoho CRM）
   ↓
5. 作業記録を表示（既存の記録がある場合）
   ↓
6. 整備士が作業記録を入力
   ↓
7. 使用したコーティング剤を記録
   ↓
8. 作業時間を記録
   ↓
9. Before/After写真を撮影
   ↓
10. 自動保存（30秒ごと、または項目変更時）
   ↓
11. 作業完了ボタンをタップ
   ↓
12. 作業記録を保存（Zoho CRM）
   ↓
13. 写真をアップロード（Google Drive）
   ↓
14. フロントスタッフに通知
   ↓
15. ステータスを「乾燥中」に更新
   ↓
16. 乾燥完了後、「出庫待ち」ステータスに更新
```

### 5-4. インタラクション設計

#### 5-4-1. 作業記録入力

- **タップ**: テキストエリアにフォーカス
- **入力**: テキストを入力

#### 5-4-2. コーティング剤入力

- **追加**: 「＋コーティング剤を追加」ボタンをタップ
- **入力**: 種類・使用量・メーカー・型番を入力
- **削除**: コーティング剤を削除（確認ダイアログ表示）

#### 5-4-3. 作業時間入力

- **タップ**: 日時選択UIを表示
- **入力**: 作業開始日時・作業完了日時を入力
- **計算**: 作業時間を自動計算

#### 5-4-4. 写真撮影

- **タップ**: カメラを起動
- **撮影**: 写真を撮影
- **確認**: 撮影後、確認画面を表示（再撮影可能）
- **保存**: 確認後、写真を保存（Google Drive）
- **表示**: 撮影済みの場合、サムネイルを表示
- **拡大**: サムネイルをタップすると拡大表示
- **削除**: 写真を削除（確認ダイアログ表示）

#### 5-4-5. エラーハンドリング

- **ネットワークエラー**: オフライン時はローカルストレージに保存、オンライン時に自動同期
- **保存エラー**: エラーメッセージを表示、再試行ボタンを表示
- **写真アップロードエラー**: エラーメッセージを表示、再アップロードボタンを表示

### 5-5. 状態管理

- **ローディング**: 車両情報取得中、作業記録保存中、写真アップロード中
- **エラー**: ネットワークエラー、保存エラー、写真アップロードエラー
- **成功**: 作業完了、フロントスタッフへの通知完了、ステータス更新完了

---

## 6. データモデル

### 6-1. コーティングジョブデータ

```typescript
/**
 * コーティングジョブ
 */
export interface CoatingJob {
  /** Job ID */
  jobId: string;
  /** 入庫区分 */
  serviceKind: "コーティング";
  /** コーティングの種類 */
  coatingType: "ハイモースコート エッジ" | "ハイモースコート グロウ" | "ガードグレイズ";
  
  /** 車両情報 */
  vehicle: {
    /** 車両ID */
    vehicleId: string;
    /** 車両の寸法（金額計算用） */
    dimensions?: string;
    /** 走行距離 */
    mileage: number;
  };
  
  /** 事前見積情報 */
  preEstimate: {
    /** コーティングの種類 */
    coatingType: "ハイモースコート エッジ" | "ハイモースコート グロウ" | "ガードグレイズ";
    /** 基本コーティング金額 */
    basePrice: number;
    /** 選択されたオプション */
    selectedOptions: CoatingOption[];
    /** オプション合計金額（10％割引適用後） */
    optionsTotal: number;
    /** 合計金額 */
    total: number;
    /** 承認日時 */
    approvedAt?: Date;
  };
  
  /** 診断情報 */
  diagnosis: {
    /** 車体の状態確認結果 */
    bodyCondition: BodyConditionCheck[];
    /** 傷・キズの位置・程度 */
    scratches: ScratchInfo[];
    /** 既存コーティングの状態 */
    existingCoating?: ExistingCoatingInfo;
    /** Before写真 */
    beforePhotos: Photo[];
    /** コメント（整備士の所見） */
    comments: string;
  };
  
  /** 作業情報 */
  work: {
    /** 実施した作業の記録 */
    workRecords: string;
    /** Before/After写真 */
    photos: Photo[];
    /** 使用したコーティング剤 */
    coatingMaterials: CoatingMaterial[];
    /** 作業開始日時 */
    workStartAt?: Date;
    /** 作業完了日時 */
    workEndAt?: Date;
    /** 作業時間（分） */
    workDuration: number;
    /** 作業メモ */
    notes: string;
    /** 作業完了日時 */
    completedAt?: Date;
  };
  
  /** ステータス */
  status: "事前見積作成待ち" | "顧客承認待ち" | "入庫待ち" | "診断中" | "作業待ち" | "作業中" | "乾燥中" | "出庫待ち";
}

/**
 * コーティングオプション
 */
export interface CoatingOption {
  /** オプションID */
  id: string;
  /** オプション名 */
  name: string;
  /** 通常価格 */
  regularPrice: number;
  /** 同時施工価格（10％割引） */
  simultaneousPrice: number;
  /** 選択済みか */
  selected: boolean;
}

/**
 * 車体の状態確認
 */
export interface BodyConditionCheck {
  /** 箇所 */
  location: string;
  /** 状態 */
  condition: "良好" | "軽微な傷" | "中程度の傷" | "深刻な傷" | "汚れあり" | "コーティング残存";
  /** 写真 */
  photo?: Photo;
  /** コメント */
  comment?: string;
}

/**
 * 傷・キズ情報
 */
export interface ScratchInfo {
  /** 位置 */
  position: string;
  /** 程度 */
  severity: "軽微" | "中程度" | "深刻";
  /** 写真 */
  photo: Photo;
  /** コメント */
  comment?: string;
}

/**
 * 既存コーティング情報
 */
export interface ExistingCoatingInfo {
  /** 既存コーティングの種類 */
  type: string;
  /** 施工日 */
  appliedDate: Date;
  /** 状態 */
  condition: "良好" | "劣化" | "剥がれ";
  /** 写真 */
  photo?: Photo;
}

/**
 * コーティング剤
 */
export interface CoatingMaterial {
  /** コーティング剤の種類 */
  type: string;
  /** 使用量 */
  quantity: number;
  /** メーカー */
  manufacturer?: string;
  /** 型番 */
  modelNumber?: string;
}
```

---

## 7. API設計

### 7-1. 事前見積内容の保存API

**エンドポイント**: `POST /api/jobs/[id]/pre-estimate`

**リクエストボディ**:
```typescript
{
  coatingType: "ハイモースコート エッジ" | "ハイモースコート グロウ" | "ガードグレイズ";
  basePrice: number;
  selectedOptions: CoatingOption[];
  optionsTotal: number;
  total: number;
}
```

**レスポンス**:
```typescript
{
  success: boolean;
  jobId: string;
  status: string;
}
```

### 7-2. 受付情報の保存API

**エンドポイント**: `POST /api/jobs/[id]/reception`

**リクエストボディ**:
```typescript
{
  mileage: number;
}
```

**レスポンス**:
```typescript
{
  success: boolean;
  jobId: string;
  status: string;
}
```

### 7-3. 診断結果の保存API

**エンドポイント**: `POST /api/jobs/[id]/diagnosis`

**リクエストボディ**:
```typescript
{
  bodyCondition: BodyConditionCheck[];
  scratches: ScratchInfo[];
  existingCoating?: ExistingCoatingInfo;
  beforePhotos: Photo[];
  comments: string;
}
```

**レスポンス**:
```typescript
{
  success: boolean;
  jobId: string;
  status: string;
}
```

### 7-4. 作業記録の保存API

**エンドポイント**: `POST /api/jobs/[id]/work`

**リクエストボディ**:
```typescript
{
  workRecords: string;
  photos: Photo[];
  coatingMaterials: CoatingMaterial[];
  workStartAt?: Date;
  workEndAt?: Date;
  workDuration: number;
  notes: string;
}
```

**レスポンス**:
```typescript
{
  success: boolean;
  jobId: string;
  status: string;
}
```

### 7-5. マスタデータ取得API

**エンドポイント**: `GET /api/coating/master-data`

**クエリパラメータ**:
- `dimensions`: 車両の寸法

**レスポンス**:
```typescript
{
  basePrices: {
    "ハイモースコート エッジ": number;
    "ハイモースコート グロウ": number;
    "ガードグレイズ": number;
  };
  options: CoatingOption[];
}
```

---

## 8. ユーザージャーニー

### 8-1. パターンBのフロー（事前見積→承認→入庫→作業）

```
【予約】
1. 顧客がコーティング希望の予約
2. フロントスタッフが事前見積画面を開く
   - 車両情報を確認（自動入力済み）
   - 車両の寸法を確認（金額計算用）
   - コーティングの種類を選択（3種類）
   - オプションサービスを選択（7種類、同時施工で10％割引）
   - 見積金額を自動計算
   - 「顧客に送信」ボタンをタップ
   - 事前見積内容を保存
   - ステータスを「顧客承認待ち」に更新

【承認】
3. 顧客が承認
   - 見積内容を確認
   - 承認
   - ステータスを「入庫待ち」に更新

【入庫】
4. フロントスタッフが受付画面を開く
   - 承認済み見積内容を確認（自動入力済み）
   - 走行距離を入力
   - 前回コーティング履歴を確認
   - 「受付完了」ボタンをタップ
   - ステータスを「診断中」に更新

【診断】
5. 整備士が診断画面を開く
   - 車両情報を確認（自動入力済み）
   - 承認済み見積内容を確認（参考用）
   - 車体の状態確認を実施（各箇所）
   - 傷・キズを記録
   - 既存コーティングの状態を確認（該当する場合）
   - Before写真を撮影
   - 「診断完了」ボタンをタップ
   - ステータスを「作業待ち」に更新

【作業】
6. 整備士が作業画面を開く
   - 承認済み見積内容を確認（参考用）
   - 診断結果を確認（参考用）
   - 作業を実施
   - 作業記録を入力
   - 使用したコーティング剤を記録
   - 作業時間を記録
   - Before/After写真を撮影
   - 「作業完了」ボタンをタップ
   - ステータスを「乾燥中」に更新
   - フロントスタッフに通知

【乾燥】
7. 乾燥期間（数日）
   - ステータスは「乾燥中」
   - 乾燥完了後、「出庫待ち」ステータスに更新（手動または自動）

【引渡】
8. フロントスタッフが引渡し・説明
   - 作業内容を確認
   - 顧客に説明
   - メンテナンス方法を説明
   - 効果の持続期間を説明（1年から3年）
   - ステータスを「出庫待ち」に更新

9. 出庫完了
   - ステータスを「完了」に更新
```

### 8-2. 各画面でのユーザー操作の詳細

#### 8-2-1. 事前見積画面での操作

1. **画面を開く**
   - 車両情報が自動で表示される
   - 車両の寸法が自動で取得される
   - マスタデータから金額が自動で取得される

2. **コーティングの種類を選択**
   - ラジオボタンで選択
   - 選択された種類の金額をマスタデータから取得して表示
   - 見積内訳を自動更新

3. **オプションサービスを選択**
   - チェックボックスで選択
   - 同時施工価格を自動計算（10％割引）
   - 見積内訳を自動更新

4. **顧客に送信**
   - 「顧客に送信」ボタンをタップ
   - 見積内容を保存
   - 顧客に送信（メール等）

#### 8-2-2. 受付画面での操作

1. **画面を開く**
   - 車両情報が自動で表示される
   - 承認済み見積内容が自動で表示される
   - 前回コーティング履歴が自動で表示される

2. **走行距離を入力**
   - 現在の走行距離を入力

3. **受付完了**
   - 「受付完了」ボタンをタップ
   - 受付情報を保存
   - 診断画面への遷移を可能にする

#### 8-2-3. 診断画面での操作

1. **画面を開く**
   - 車両情報が自動で表示される
   - 承認済み見積内容が自動で表示される
   - 既存の診断結果がある場合、自動で読み込まれる

2. **車体の状態確認**
   - 各箇所の状態を選択
   - 必要に応じて写真を撮影
   - コメントを入力

3. **傷・キズの記録**
   - 傷・キズを追加
   - 位置・程度を入力
   - 写真を撮影

4. **既存コーティングの確認**
   - 既存コーティングの有無を選択
   - 既存コーティングがある場合、詳細を入力

5. **Before写真の撮影**
   - 車体全体（前・後・左・右）を撮影
   - 傷・キズ箇所の接写を撮影

6. **診断完了**
   - 「診断完了」ボタンをタップ
   - 診断結果を保存
   - 作業画面への遷移を可能にする

#### 8-2-4. 作業画面での操作

1. **画面を開く**
   - 車両情報が自動で表示される
   - 承認済み見積内容が自動で表示される
   - 診断結果が自動で表示される
   - 既存の作業記録がある場合、自動で読み込まれる

2. **作業を実施**
   - 洗車・下地処理・コーティング剤塗布・乾燥・仕上げ

3. **作業記録を入力**
   - 実施した作業の詳細を記録

4. **使用したコーティング剤を記録**
   - コーティング剤を追加
   - 種類・使用量・メーカー・型番を入力

5. **作業時間を記録**
   - 作業開始日時・作業完了日時を入力
   - 作業時間を自動計算

6. **Before/After写真を撮影**
   - Before写真を撮影（診断画面から引き継ぎ、追加も可能）
   - After写真を撮影（車体全体、撥水性の確認）

7. **作業完了**
   - 「作業完了」ボタンをタップ
   - Before/After写真が撮影されていない場合、警告を表示（推奨）
   - 確認ダイアログを表示
   - 作業記録を保存
   - 写真をアップロード
   - フロントスタッフに通知
   - ステータスを「乾燥中」に更新

---

## 9. 実装の優先順位

### Phase 1: MVP（最小限の機能）

1. **事前見積画面の基本機能**
   - 車両の寸法確認
   - コーティングの種類選択
   - オプションサービス選択
   - 見積金額の自動計算
   - 顧客への送信

2. **受付画面の基本機能**
   - 承認済み見積内容の確認
   - 走行距離の入力
   - データの保存

3. **診断画面の基本機能**
   - 車体の状態確認
   - 傷・キズの記録
   - Before写真の撮影
   - データの保存

4. **作業画面の基本機能**
   - 作業記録の入力
   - 使用したコーティング剤の記録
   - Before/After写真の撮影
   - データの保存

### Phase 2: 拡張機能

1. **マスタデータ連携**
   - 車両の寸法による金額計算
   - マスタデータからの金額取得

2. **オプションサービスの同時施工判定**
   - 同時施工価格の自動計算（10％割引）
   - 見積内訳の自動更新

3. **既存コーティングの状態確認**
   - 既存コーティング情報の入力
   - 状態の記録

4. **自動保存機能**
   - 30秒ごとの自動保存
   - オフライン対応

### Phase 3: 高度な機能

1. **通知機能**
   - フロントスタッフへの通知

2. **乾燥時間の管理**
   - 乾燥期間の管理
   - 乾燥完了通知

3. **レポート機能**
   - 顧客向けレポート画面での表示

---

## 更新履歴

- 2025-01-XX: 初版作成（詳細画面設計書）

























