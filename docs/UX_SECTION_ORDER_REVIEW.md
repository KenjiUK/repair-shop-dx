# UXセクション順序レビュー

## 概要
各下層ページのセクション順序を業務フロー視点でレビューし、改善提案を行いました。

---

## 1. 診断画面 (`/mechanic/diagnosis/[id]`)

### 現状の順序
1. ヘッダー（案件情報・アラート）
2. ワークオーダー選択
3. **外観撮影** ← 最初に配置
4. OBD診断結果（12ヵ月点検・修理の場合）
5. **診断チェックリスト**（サービス種類別）
6. 品質管理・最終検査セクション
7. **診断料金入力**
8. 一時帰宅/入庫選択
9. ジョブメモ
10. 診断完了ボタン

### ❌ 問題点
- **診断料金入力が下部にある**：診断完了時に料金を確認・入力する流れが不自然
- **一時帰宅/入庫選択が下部にある**：診断完了時の重要な判断項目が目立たない

### ✅ 改善提案

**推奨順序：**
1. ヘッダー（案件情報・アラート）
2. ワークオーダー選択
3. **一時帰宅/入庫選択** ← 移動：診断前に確認すべき事項
4. 外観撮影
5. OBD診断結果（12ヵ月点検・修理の場合）
6. **診断チェックリスト**（サービス種類別）
7. 品質管理・最終検査セクション
8. ジョブメモ
9. **診断料金入力** ← 移動：診断完了直前で確認・入力
10. 診断完了ボタン

**理由：**
- 一時帰宅/入庫の判断は診断前に確認すべき（診断内容に影響する可能性がある）
- 診断料金は診断完了時に入力する方が自然（診断時間を確定してから）
- ジョブメモは診断料金の前が適切（診断結果のまとめとして）

---

## 2. 見積画面 (`/admin/estimate/[id]`)

### 現状の順序（左カラム）
1. 法定費用カード（車検の場合）
2. オプションメニューセレクター（12ヵ月点検の場合）
3. 故障診断用ビュー（故障診断の場合）
4. 板金・塗装用ビュー（板金・塗装の場合）
5. レストア用ビュー（レストアの場合）
6. その他用ビュー（その他の場合）
7. **診断写真**
8. **見積変更履歴**

### 現状の順序（右カラム）
1. **見積項目**（必須/推奨/任意）
2. 部品リスト（修理の場合）
3. 診断料金表示
4. 合計金額
5. LINE送信ボタン

### ❌ 問題点
- **診断写真が左カラム下部にある**：見積作成時に診断結果を確認しにくい
- **見積変更履歴が左カラム最下部**：顧客からの変更申請を確認する際にスクロールが必要
- **サービス種類別の見積ビューが分散**：関連情報が分かれている

### ✅ 改善提案

**推奨順序（左カラム）：**
1. **診断写真** ← 移動：最初に診断結果を確認
2. 法定費用カード（車検の場合）
3. オプションメニューセレクター（12ヵ月点検の場合）
4. 故障診断用ビュー（故障診断の場合）
5. 板金・塗装用ビュー（板金・塗装の場合）
6. レストア用ビュー（レストアの場合）
7. その他用ビュー（その他の場合）
8. **見積変更履歴** ← 移動：変更申請を確認してから見積項目を修正

**右カラムは現状のままでOK**
1. 見積項目（必須/推奨/任意）
2. 部品リスト（修理の場合）
3. 診断料金表示
4. 合計金額
5. LINE送信ボタン

**理由：**
- 診断写真を最初に配置することで、見積作成時に診断結果をすぐ確認できる
- 見積変更履歴を診断結果の後に配置することで、変更申請を確認してから見積項目を修正する流れが自然
- 見積項目は右カラムで編集作業を行うため、現在の配置で問題ない

---

## 3. 作業画面 (`/mechanic/work/[id]`)

### 現状の順序
1. ヘッダー（案件情報・作業指示書印刷）
2. ワークオーダー選択
3. **進捗表示**
4. **注意事項**（写真撮影について）
5. サービス種類別の作業セクション
6. 作業完了ボタン

### ❌ 問題点
- **注意事項が進捗表示の後**：作業開始前に注意事項を確認できない

### ✅ 改善提案

**推奨順序：**
1. ヘッダー（案件情報・作業指示書印刷）
2. ワークオーダー選択
3. **注意事項** ← 移動：作業開始前に確認すべき
4. **進捗表示**
5. サービス種類別の作業セクション
6. 作業完了ボタン

**理由：**
- 注意事項（写真撮影方法など）は作業開始前に確認すべき
- 進捗表示は作業中に確認するため、注意事項の後で問題ない

---

## 4. 顧客承認画面 (`/customer/approval/[id]`)

### 現状の順序
1. ヘッダー（顧客情報・有効期限表示）
2. **見積項目**（必須/推奨/任意）
3. 合計金額
4. 承認ボタン

### ✅ 現状の評価
**問題なし**：顧客の視点では「見積項目を確認 → 合計を確認 → 承認」の流れが自然で適切

**補足：**
- 必須項目が上、推奨・任意が下という優先順位も適切
- 合計金額が承認ボタンの直前にあるのも自然

---

## 5. 引渡し画面 (`/presentation/[id]`)

### 現状の順序
1. ヘッダー（顧客情報・出庫完了ボタン）
2. 顧客・車両情報カード
3. **タブナビゲーション**
   - Before/Afterギャラリー
   - 作業内容
   - 請求書

### ❌ 問題点
- **請求書タブが最後**：顧客は請求金額を最初に確認したい場合が多い

### ✅ 改善提案

**推奨タブ順序：**
1. **作業内容** ← 移動：作業内容を確認してから写真を見る流れ
2. **請求書** ← 移動：金額を確認してから写真を見る流れ
3. **Before/Afterギャラリー**

**または、タブなしで以下の順序：**
1. ヘッダー（顧客情報・出庫完了ボタン）
2. 顧客・車両情報カード
3. **作業内容サマリー**
4. **請求書**
5. **Before/Afterギャラリー**

**理由：**
- 顧客は「何をしたか」→「いくらかかるか」→「写真で確認」の順で確認することが多い
- Before/Afterギャラリーは最後に配置することで、作業内容と金額を確認した後に視覚的に確認する流れが自然

---

## 6. 顧客報告画面 (`/customer/report/[id]`)

### 現状の順序
1. ヘッダー（顧客・車両情報カード）
2. **作業進捗セクション**
3. **整備内容（Before/After）**
4. **実施内容・ご請求**
5. **作業動画**（あれば）
6. **ビデオ通話セクション**

### ❌ 問題点
- **作業進捗セクションが最初**：報告画面では作業は完了しているため、進捗情報は不要か、もしくは下部に移動すべき
- **実施内容・ご請求が後半**：金額情報は重要なため、もっと上に配置すべき

### ✅ 改善提案

**推奨順序：**
1. ヘッダー（顧客・車両情報カード）
2. **実施内容・ご請求** ← 移動：最初に金額を確認
3. **整備内容（Before/After）** ← 移動：次に視覚的な確認
4. **作業動画**（あれば）
5. **ビデオ通話セクション**
6. **作業進捗セクション** ← 移動：参考情報として最後に

**理由：**
- 報告画面は作業完了後の確認用なので、金額情報を最初に確認する方が自然
- Before/After写真は金額確認後に視覚的に確認する流れが適切
- 作業進捗は参考情報として最後に配置するか、省略しても良い

---

## 総合的な改善優先度

### 🔴 高優先度（即座に改善すべき）
1. **診断画面**：診断料金入力・一時帰宅選択の位置
2. **見積画面**：診断写真・見積変更履歴の位置
3. **作業画面**：注意事項の位置

### 🟡 中優先度（できるだけ早く改善）
4. **引渡し画面**：タブの順序またはセクションの順序
5. **顧客報告画面**：セクションの順序

### 🟢 低優先度（時間があるときに改善）
6. **顧客承認画面**：現状で問題なし

---

## 実装時の注意点

1. **各セクションの依存関係を確認**
   - セクション間でデータの依存関係がある場合は、順序変更時に影響を確認する

2. **スクロール位置の考慮**
   - 重要なセクションが画面外にないよう、適切な位置に配置する

3. **モバイル対応**
   - モバイル表示でも順序が自然になるよう、レスポンシブ対応を確認する

4. **ユーザビリティテスト**
   - 変更後、実際のユーザー（整備士・受付担当者）に使用感を確認してもらう







