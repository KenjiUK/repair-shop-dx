# 見積画面のUI/UX改善

**作成日**: 2024-12-19  
**ステータス**: ✅ **完了**

## 改善内容

### 1. 作業内容・使用部品名等の入力欄の拡大

#### 問題点
- 入力欄が小さく、長いテキストが入力しにくい
- 複数行入力に対応していない
- デスクトップ・タブレット・スマホで一貫性がない

#### 改善内容

**スマホ（sm以下）:**
- `Input` → `Textarea` に変更
- `h-12` → `min-h-[80px]` に変更（複数行入力に対応）
- `resize-y` を追加（ユーザーが高さを調整可能）
- ラベルを追加（`Label`コンポーネント）

**タブレット（md以上lg未満）:**
- グリッド列幅: `200px` → `minmax(250px,1fr)` に変更
- `Input` → `Textarea` に変更
- `h-12` → `min-h-[80px]` に変更
- `resize-y` を追加

**デスクトップ（lg以上）:**
- グリッド列幅: `2fr` → `minmax(300px,3fr)` に変更
- `Input` → `Textarea` に変更
- `h-12` → `min-h-[80px]` に変更
- `resize-y` を追加
- `gap-2` → `gap-3` に変更（スペーシング改善）

### 2. 品目選択（工賃マスタ選択）の位置改善

#### 問題点
- 品目選択が「技術量」の列に配置されており、作業内容との関連性が不明確
- 業務フロー的には、作業内容を入力した後に品目を選んで自動入力する方が自然
- 作業内容と品目選択が離れているため、操作が分かりにくい

#### 改善内容

**スマホ（sm以下）:**
- 品目選択を作業内容の直下に配置
- 「品目を選んで自動入力」という説明テキストを追加
- 技術量は表示のみ（選択機能は作業内容の下に移動）

**タブレット（md以上lg未満）:**
- 品目選択を作業内容の直下に配置
- 技術量は表示のみ（選択機能は作業内容の下に移動）

**デスクトップ（lg以上）:**
- 品目選択を作業内容の直下に配置
- 「品目を選んで自動入力」という説明テキストを追加（右側に配置）
- 技術量は表示のみ（選択機能は作業内容の下に移動）

### 3. レスポンシブデザインの改善

#### 改善内容

**グリッドレイアウトの最適化:**
- タブレット: `grid-cols-[200px_80px_100px_100px_120px_60px]` → `grid-cols-[minmax(250px,1fr)_80px_100px_100px_120px_60px]`
- デスクトップ: `grid-cols-[2fr_80px_100px_100px_120px_auto]` → `grid-cols-[minmax(300px,3fr)_80px_100px_100px_120px_auto]`

**スペーシングの改善:**
- デスクトップ: `gap-2` → `gap-3` に変更
- `py-2` → `py-3` に変更（行間の改善）

**アイコンの配置:**
- 写真アイコンのサイズを `h-12 w-12` → `h-10 w-10` に変更（よりコンパクトに）
- デスクトップでは `mt-1` を追加（Textareaとの位置調整）

### 4. 業務フローに沿ったUI配置

#### 改善内容

**操作順序の明確化:**
1. 作業内容・使用部品名等を入力（大きく、複数行対応）
2. 品目を選択（作業内容の直下に配置）
3. 自動入力（作業内容名と技術量が自動設定）
4. 数量・単価を入力
5. 技術量を確認（表示のみ）

**視覚的な関連性の向上:**
- 作業内容と品目選択を近くに配置
- 「品目を選んで自動入力」という説明テキストで機能を明確化

## 技術的な変更

### コンポーネントの変更

1. **`Input` → `Textarea` への変更**
   - 作業内容・使用部品名等の入力欄を `Textarea` に変更
   - `min-h-[80px]` で最小高さを確保
   - `resize-y` でユーザーが高さを調整可能

2. **`LaborCostSelect` の配置変更**
   - 技術量の列から作業内容の下に移動
   - すべての画面サイズで一貫した配置

3. **技術量の表示方法**
   - 工賃マスタから選択した場合: 表示のみ（`bg-slate-50` の背景）
   - カスタム入力の場合: 数値入力フィールドを表示

### インポートの追加

```typescript
import { Textarea } from "@/components/ui/textarea";
```

## 期待される効果

### ユーザビリティの向上
- **入力しやすさ**: 作業内容入力欄が大きくなり、長いテキストも入力しやすくなる
- **操作の明確化**: 品目選択が作業内容の近くに配置され、操作フローが明確になる
- **視認性の向上**: 複数行入力に対応し、内容を確認しやすくなる

### 業務効率の向上
- **自動入力の活用**: 品目選択が作業内容の近くに配置され、自動入力機能を活用しやすくなる
- **入力ミスの削減**: 作業内容と品目選択の関連性が明確になり、入力ミスを削減

### レスポンシブ対応の改善
- **デスクトップ**: 作業内容入力欄が大きく、効率的な入力が可能
- **タブレット**: 適切なサイズで、横スクロール時の操作性が向上
- **スマホ**: 縦に並べて、タッチ操作に最適化

## デザインシステムへの準拠

### フォントサイズ
- `text-base` (16px) を使用（40歳以上ユーザー向け最適化）
- ラベルも `text-base` を使用

### タッチターゲット
- 入力欄: `min-h-[80px]` で十分な高さを確保
- ボタン: `h-12` (48px) を維持

### スペーシング
- `gap-3` (12px) で適切な間隔を確保
- `py-3` (12px) で行間を改善

## 今後の改善案

1. **オートコンプリート機能**
   - 作業内容入力時に、過去の入力履歴や工賃マスタの名前を候補として表示

2. **バリデーションの強化**
   - 作業内容が空の場合の警告表示
   - 技術量が0円の場合の警告表示（既存機能を維持）

3. **キーボードショートカット**
   - `Tab` キーで次の項目に移動
   - `Enter` キーで品目選択ダイアログを開く

## 最終更新日
2024-12-19






