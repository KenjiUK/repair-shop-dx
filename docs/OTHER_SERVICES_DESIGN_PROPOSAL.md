# 「その他」業務の設計提案

## ドキュメント情報

- **作成日**: 2025-01-XX
- **バージョン**: 1.0
- **対象**: 「その他」業務の設計提案
- **ステータス**: 提案

---

## 1. 既存入庫区分のレビュー

### 1-1. 定義済み入庫区分一覧

以下の入庫区分が定義済みです：

| 入庫区分 | 仕様書 | ステータス |
|---------|--------|----------|
| 車検 | ✅ VEHICLE_INSPECTION_CONFIRMED_SPEC.md | 完了 |
| 12ヵ月点検 | ✅ 12MONTH_INSPECTION_CONFIRMED_SPEC.md | 完了 |
| エンジンオイル交換 | ✅ ENGINE_OIL_CHANGE_CONFIRMED_SPEC.md | 完了 |
| タイヤ交換・ローテーション | ✅ TIRE_REPLACEMENT_ROTATION_CONFIRMED_SPEC.md | 完了 |
| その他のメンテナンス | ✅ GENERAL_MAINTENANCE_CONFIRMED_SPEC.md | 完了 |
| 故障診断 | ✅ FAULT_DIAGNOSIS_CONFIRMED_SPEC.md | 完了 |
| 修理・整備 | ✅ REPAIR_MAINTENANCE_CONFIRMED_SPEC.md | 完了 |
| チューニング・パーツ取付 | ✅ TUNING_PARTS_INSTALLATION_CONFIRMED_SPEC.md | 完了 |
| コーティング | ✅ COATING_CONFIRMED_SPEC.md | 完了 |
| 板金・塗装 | ✅ BODY_PAINT_CONFIRMED_SPEC.md | 完了 |
| レストア | ✅ RESTORE_CONFIRMED_SPEC.md | 完了 |

### 1-2. コード上の入庫区分

`src/components/features/job-card.tsx`で定義されている入庫区分：
- 車検
- 12ヵ月点検
- 修理・整備
- 故障診断
- エンジンオイル交換
- タイヤ交換・ローテーション
- レストア
- チューニング
- パーツ取付
- コーティング

**注意**: 「板金・塗装」がコードにまだ反映されていない可能性があります。

### 1-3. 抜けている可能性のある業務

一般的な整備工場で考えられる業務で、上記に分類されないもの：

1. **洗車・ワックス**
   - 洗車、ワックス、内装クリーニングなど
   - 作業時間: 30分-2時間
   - 特徴: 比較的シンプルな作業

2. **名義変更代行**
   - 車両の名義変更手続きの代行
   - 作業時間: 手続きのみ（車両預かり不要の場合もある）
   - 特徴: 書類手続きが中心

3. **その他の手続き代行**
   - 抹消登録、移転登録など
   - 作業時間: 手続きのみ
   - 特徴: 書類手続きが中心

4. **その他の一般的な修理**
   - 上記の入庫区分に分類されない修理
   - 作業時間: ケースバイケース
   - 特徴: 多様な作業内容

5. **その他のカスタマイズ**
   - 上記の入庫区分に分類されないカスタマイズ
   - 作業時間: ケースバイケース
   - 特徴: 多様な作業内容

---

## 2. 「その他」業務の設計提案

### 2-1. 設計方針

**汎用的なフォーマットで、柔軟に対応できる設計**

**設計原則**:
- **最小限の構造**: 必要最小限の構造で、多様な業務に対応
- **カスタマイズ可能**: 業務内容に応じて、診断項目・見積項目・作業項目を動的に設定
- **シンプルなフロー**: 複雑な業務フローは避け、基本的なフロー（入庫→診断→見積→承認→作業→引渡）を採用

### 2-2. 業務フローパターン

**パターンA（入庫→診断→見積→承認→作業）を基本**

**理由**:
- 「その他」は多様な業務を含むため、最も汎用的なパターンAを採用
- 事前見積が必要な場合は、口頭見積や簡易見積として扱う

### 2-3. 診断内容

**設計**:
- **カスタマイズ可能な診断項目**: 業務内容に応じて、診断項目を動的に設定
- **自由入力形式**: 診断内容を自由に入力できる形式
- **写真撮影**: 必要に応じて写真を撮影（必須ではない）

### 2-4. 見積もり

**設計**:
- **カスタマイズ可能な見積項目**: 業務内容に応じて、見積項目を動的に設定
- **自由入力形式**: 見積項目を自由に入力できる形式
- **部品リスト**: 必要に応じて部品リストを追加

### 2-5. 作業記録

**設計**:
- **自由入力形式**: 作業内容を自由に入力できる形式
- **写真撮影**: 必要に応じて写真を撮影（必須ではない）
- **作業時間の記録**: 作業時間を記録

### 2-6. PDF生成

**設計**:
- **PDF生成は不要**: 「その他」業務ではPDF生成は不要
- **作業記録はシステム内で管理**: 作業記録はシステム内で管理

---

## 3. データモデル提案

### 3-1. 「その他」ジョブデータ

```typescript
/**
 * 「その他」ジョブ
 */
export interface OtherServiceJob {
  /** Job ID */
  jobId: string;
  /** 入庫区分 */
  serviceKind: "その他";
  
  /** 車両情報 */
  vehicle: {
    /** 車両ID */
    vehicleId: string;
    /** 走行距離 */
    mileage: number;
  };
  
  /** 業務内容 */
  serviceContent: {
    /** 業務内容の種類（自由入力） */
    type: string;
    /** 業務内容の詳細（自由入力） */
    description: string;
  };
  
  /** 診断情報 */
  diagnosis: {
    /** 診断項目（カスタマイズ可能） */
    items: CustomDiagnosisItem[];
    /** 診断写真 */
    photos: Photo[];
    /** コメント（整備士の所見） */
    comments: string;
  };
  
  /** 見積情報 */
  estimate: {
    /** 見積もり項目（カスタマイズ可能） */
    items: EstimateItem[];
    /** 部品リスト（必要に応じて） */
    parts?: PartItem[];
    /** 合計金額 */
    total: number;
    /** 承認日時 */
    approvedAt?: Date;
  };
  
  /** 作業情報 */
  work: {
    /** 作業内容（自由入力） */
    workContent: string;
    /** 作業写真 */
    photos: Photo[];
    /** 使用した部品（必要に応じて） */
    usedParts?: PartItem[];
    /** 作業時間 */
    workDuration: number;
    /** 作業メモ */
    notes: string;
  };
  
  /** ステータス */
  status: "入庫待ち" | "診断中" | "見積作成待ち" | "顧客承認待ち" | "作業待ち" | "作業中" | "出庫待ち";
}

/**
 * カスタム診断項目
 */
export interface CustomDiagnosisItem {
  /** 項目名（自由入力） */
  name: string;
  /** 状態（自由入力） */
  condition: string;
  /** 写真 */
  photo?: Photo;
  /** コメント */
  comment?: string;
}
```

---

## 4. 画面設計提案

### 4-1. 受付画面（Phase 1）

#### 入庫処理

**設計**:
- 「その他」業務の受付
- 業務内容の種類を入力（自由入力）
- 業務内容の詳細を入力（自由入力）
- 走行距離を入力

**UI要素**:
- 業務内容の種類入力欄（自由入力）
- 業務内容の詳細入力欄（自由入力）
- 走行距離入力欄

### 4-2. 診断画面（Phase 2）

#### 診断内容の記録

**設計**:
- 診断項目を自由に入力（カスタマイズ可能）
- 必要に応じて写真を撮影
- コメントを入力

**UI要素**:
- 診断項目の追加ボタン
- 診断項目の入力欄（項目名、状態、写真、コメント）
- 写真撮影ボタン（任意）
- コメント入力欄

### 4-3. 見積作成画面（Phase 3）

#### 見積もりの作成

**設計**:
- 見積項目を自由に入力（カスタマイズ可能）
- 必要に応じて部品リストを追加
- 見積金額を計算

**UI要素**:
- 見積項目の追加ボタン
- 見積項目の入力欄（項目名、数量、単価、金額）
- 部品リストの追加ボタン（必要に応じて）
- 見積金額表示

### 4-4. 作業画面（Phase 5）

#### 作業記録

**設計**:
- 作業内容を自由に入力
- 必要に応じて写真を撮影
- 必要に応じて部品を記録
- 作業時間を記録

**UI要素**:
- 作業内容入力欄（自由入力）
- 写真撮影ボタン（任意）
- 部品入力欄（必要に応じて）
- 作業時間入力欄
- 作業メモ入力欄

### 4-5. 引渡画面（Phase 7）

#### 顧客への引渡

**設計**:
- 作業内容を説明して引渡

**UI要素**:
- 作業内容の表示
- 引渡ボタン

---

## 5. 実装方針

### 5-1. 汎用的なフォーマット

**設計**:
- 必要最小限の構造で、多様な業務に対応
- カスタマイズ可能な診断項目・見積項目・作業項目
- 自由入力形式を基本とする

### 5-2. 柔軟な対応

**設計**:
- 業務内容に応じて、診断項目・見積項目・作業項目を動的に設定
- 必須項目は最小限に抑える
- 写真撮影、部品管理などは任意

### 5-3. シンプルなフロー

**設計**:
- 基本的なフロー（入庫→診断→見積→承認→作業→引渡）を採用
- 複雑な業務フローは避ける
- 事前見積が必要な場合は、口頭見積や簡易見積として扱う

---

## 6. 想定される「その他」業務の例

### 6-1. 洗車・ワックス

**特徴**:
- 作業時間: 30分-2時間
- 診断: 車体の状態確認
- 見積: 洗車、ワックス、内装クリーニングなどのオプション
- 作業: 洗車、ワックス、内装クリーニングなど
- PDF生成: 不要

### 6-2. 名義変更代行

**特徴**:
- 作業時間: 手続きのみ（車両預かり不要の場合もある）
- 診断: 書類の確認
- 見積: 手続き代行費用
- 作業: 書類手続き
- PDF生成: 不要

### 6-3. その他の一般的な修理

**特徴**:
- 作業時間: ケースバイケース
- 診断: 不具合の確認
- 見積: 修理費用、部品費用
- 作業: 修理作業
- PDF生成: 不要

---

## 7. 推奨事項

### 7-1. 「その他」業務の分類

**提案**: 「その他」業務を以下のように分類することを推奨：

1. **「その他（洗車・ワックス）」**: 洗車、ワックス、内装クリーニングなど
2. **「その他（手続き代行）」**: 名義変更代行、抹消登録など
3. **「その他（その他）」**: 上記に分類されない業務

**理由**:
- 業務内容を明確にする
- 将来的に独立した入庫区分に昇格する可能性を考慮

### 7-2. 将来的な拡張

**提案**: 将来的に「その他」業務が増えた場合、独立した入庫区分に昇格することを考慮

**例**:
- 「その他（洗車・ワックス）」→「洗車・ワックス」に昇格
- 「その他（手続き代行）」→「手続き代行」に昇格

---

## 8. 次のステップ

1. **「その他」業務の分類確認**: 「その他」業務をどのように分類するか確認
2. **汎用的なフォーマットの実装**: カスタマイズ可能な診断項目・見積項目・作業項目の実装
3. **画面設計の実装**: 受付画面、診断画面、見積作成画面、作業画面、引渡画面の実装

---

## 更新履歴

- 2025-01-XX: 初版作成（「その他」業務の設計提案）

























