# ワークフロー型UXにおける横幅設定の提案

**作成日**: 2025-01-XX  
**目的**: ワークフロー型アプリケーションにおける横幅設定の一貫性を向上させ、UXを最適化する

---

## 問題の認識

### 現状の課題

現在の設定では、画面によって横幅が異なるため、ワークフローを進める際に以下の問題が発生する可能性があります：

1. **視覚的な不連続性**: 画面遷移時に横幅が変わることで、ユーザーが混乱する
2. **認知負荷の増加**: 毎回異なるレイアウトに適応する必要がある
3. **操作性の低下**: ボタンの位置やコンテンツの配置が変わることで、操作ミスが増える可能性

### 現在の横幅設定

| ページタイプ | 横幅 | 実サイズ | 使用ページ |
|------------|------|---------|-----------|
| **フォーカス型** | `max-w-2xl` | 672px | 診断ページ、作業ページ |
| **標準型** | `max-w-4xl` | 896px | TOPページ、履歴ページ、引渡しページ |
| **データ表示型** | `max-w-7xl` | 1280px | 見積作成ページ、業務分析ページ |

---

## ワークフロー型アプリケーションのベストプラクティス

### 1. 一貫性の重要性

**研究に基づく知見:**
- **Microsoft Design Guidelines**: ワークフロー型アプリケーションでは、一貫性のあるレイアウトが操作性とユーザー満足度を向上させる
- **Nielsen Norman Group**: 画面遷移時の視覚的な不連続性は、ユーザーの認知負荷を増加させる
- **Google Material Design**: ワークフロー型アプリケーションでは、画面間の一貫性が最も重要

### 2. 情報量と一貫性のバランス

**トレードオフ:**
- **情報量優先**: 各画面で最適な横幅を使用するが、一貫性が失われる
- **一貫性優先**: すべての画面で同じ横幅を使用するが、一部の画面で情報量が制限される

**推奨アプローチ:**
- **ワークフローページ**: 一貫性を優先し、統一的な横幅を使用
- **管理ページ**: 情報量を優先し、必要に応じて広い横幅を使用

---

## 提案: ワークフロー型UX最適化

### 提案1: ワークフローページの統一（推奨）

**方針**: すべてのワークフローページを`max-w-4xl` (896px) に統一

**対象ページ:**
- ✅ 診断ページ (`max-w-2xl` → `max-w-4xl`)
- ✅ 作業ページ (`max-w-2xl` → `max-w-4xl`)
- ✅ 引渡しページ (`max-w-4xl` → 変更不要)
- ✅ 顧客承認ページ (`max-w-2xl` → `max-w-4xl`)
- ✅ 顧客レポートページ (`max-w-2xl` → `max-w-4xl`)

**メリット:**
- ✅ **一貫性の向上**: すべてのワークフローページで同じ横幅を使用
- ✅ **認知負荷の軽減**: 画面遷移時の違和感を最小限に抑える
- ✅ **操作性の向上**: ボタンの位置やコンテンツの配置が一定
- ✅ **可読性の維持**: 896pxは日本語テキストの可読性に適している（約56文字）

**デメリット:**
- ⚠️ **フォーカス型ページ**: 672pxから896pxに拡大することで、集中度が若干低下する可能性
- ⚠️ **視覚的な変化**: 一部のユーザーは、より狭い横幅を好む可能性

**実装例:**
```typescript
// 診断ページ・作業ページ
<AppHeader maxWidthClassName="max-w-4xl" />
<main className="max-w-4xl mx-auto px-4 py-6">
  {/* コンテンツ */}
</main>
```

### 提案2: 管理ページの例外維持

**方針**: 管理ページは情報量を優先し、`max-w-7xl`を維持

**対象ページ:**
- ✅ 見積作成ページ (`max-w-7xl` → 変更不要)
- ✅ 業務分析ページ (`max-w-7xl` → 変更不要)
- ✅ お知らせ管理ページ (`max-w-7xl` → 変更不要)

**理由:**
- テーブル形式のデータ表示が必要
- 複数のグラフやデータを並べて表示する必要がある
- 横スクロールを避けたい

---

## 比較: 提案1 vs 現状

### 現状の設定

| ページ | 横幅 | 文字数 | 一貫性 |
|--------|------|--------|--------|
| TOPページ | 896px | 約56文字 | - |
| 診断ページ | 672px | 約42文字 | ❌ |
| 作業ページ | 672px | 約42文字 | ❌ |
| 引渡しページ | 896px | 約56文字 | ✅ |
| 見積作成ページ | 1280px | 約80文字 | - |

**一貫性スコア**: 40% (2/5ページが統一)

### 提案1の設定

| ページ | 横幅 | 文字数 | 一貫性 |
|--------|------|--------|--------|
| TOPページ | 896px | 約56文字 | ✅ |
| 診断ページ | 896px | 約56文字 | ✅ |
| 作業ページ | 896px | 約56文字 | ✅ |
| 引渡しページ | 896px | 約56文字 | ✅ |
| 見積作成ページ | 1280px | 約80文字 | - |

**一貫性スコア**: 80% (4/5ページが統一、管理ページは例外)

---

## 代替案: 中間的なサイズの採用

### 提案3: `max-w-3xl` (768px) を標準として使用

**方針**: すべてのワークフローページを`max-w-3xl` (768px) に統一

**メリット:**
- ✅ フォーカス型ページ（672px）と標準型ページ（896px）の中間
- ✅ 両方の利点をバランスよく取り入れる
- ✅ 可読性も十分（約48文字）

**デメリット:**
- ⚠️ 標準型ページ（896px）よりも狭くなる
- ⚠️ カード一覧表示では、情報量が若干制限される

**評価**: 提案1の方が推奨される（可読性と情報量のバランスが良い）

---

## 実装ガイドライン

### ワークフローページの統一ルール

```typescript
// ✅ 推奨: すべてのワークフローページで統一
<AppHeader maxWidthClassName="max-w-4xl" />
<main className="max-w-4xl mx-auto px-4 py-6">
  {/* コンテンツ */}
</main>

// ❌ 非推奨: ページごとに異なる横幅
<AppHeader maxWidthClassName="max-w-2xl" />
<main className="max-w-2xl mx-auto px-4 py-6">
  {/* コンテンツ */}
</main>
```

### 管理ページの例外ルール

```typescript
// ✅ 管理ページ: 情報量を優先
<AppHeader maxWidthClassName="max-w-7xl" />
<main className="max-w-7xl mx-auto px-4 py-6">
  {/* テーブルやグラフ */}
</main>
```

---

## 推奨される実装計画

### フェーズ1: ワークフローページの統一（優先度: 高）

1. **診断ページ**: `max-w-2xl` → `max-w-4xl`
2. **作業ページ**: `max-w-2xl` → `max-w-4xl`
3. **顧客承認ページ**: `max-w-2xl` → `max-w-4xl`
4. **顧客レポートページ**: `max-w-2xl` → `max-w-4xl`

### フェーズ2: レイアウトの最適化（優先度: 中）

- フォーム入力欄の幅を調整（必要に応じて）
- カードレイアウトの最適化
- スペーシングの調整

### フェーズ3: ユーザーテスト（優先度: 高）

- 実際のユーザーを対象にテストを実施
- 一貫性の向上がUXに与える影響を評価
- フィードバックを基に微調整

---

## 結論

### 推奨される方針

**提案1: ワークフローページの統一（`max-w-4xl`）**

**理由:**
1. **一貫性の向上**: すべてのワークフローページで同じ横幅を使用することで、UXが向上
2. **可読性の維持**: 896pxは日本語テキストの可読性に適している
3. **情報量の確保**: 672pxよりも広いため、情報量も十分確保できる
4. **ベストプラクティスに準拠**: ワークフロー型アプリケーションでは一貫性が最重要

**例外:**
- 管理ページ（見積作成、業務分析など）は`max-w-7xl`を維持

### 次のステップ

1. 提案1の実装を検討
2. ユーザーテストを実施
3. フィードバックを基に微調整

---

## 参考資料

- [Microsoft Design Guidelines - Layout](https://learn.microsoft.com/ja-jp/power-platform/well-architected/experience-optimization/layout)
- [Nielsen Norman Group - Consistency in UI Design](https://www.nngroup.com/articles/consistency-in-ui-design/)
- [Google Material Design - Layout](https://m3.material.io/foundations/layout/understanding-layout/overview)










