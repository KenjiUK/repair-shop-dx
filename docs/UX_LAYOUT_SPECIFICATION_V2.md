# UXレイアウト仕様書 - カードセクション分割（修正版）

## 正しい理解

### レイアウト構造

```
┌─────────────────────────────────────────────────────────┐
│ ジョブカード全体                                        │
│                                                         │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 【上部セクション】                                  │ │
│ │ ┌──────────┐ ┌──────────────────┐ ┌──────────────┐ │ │
│ │ │          │ │ 顧客名: 山田 雄一│ │ ステータス    │ │ │
│ │ │ 車両画像 │ │ 車両: ポルシェ   │ │ バッジ       │ │ │
│ │ │          │ │ サービス: 車検   │ │ [引渡しを    │ │ │
│ │ │          │ │ 入庫日時、タグ   │ │  開始]       │ │ │
│ │ │          │ │ 担当者、代車     │ │              │ │ │
│ │ │          │ │ 承認済み作業内容 │ │              │ │ │
│ │ │          │ │ 受付メモ追加     │ │              │ │ │
│ │ │          │ │ 顧客向けリンク   │ │              │ │ │
│ │ │          │ │ 変更申請アラート │ │              │ │ │
│ │ └──────────┘ └──────────────────┘ └──────────────┘ │ │
│ └─────────────────────────────────────────────────────┘ │
│                                                         │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 【下部セクション】                                  │ │
│ │ ┌────────────────────────────────────────────────┐ │ │
│ │ │ 作業カード1: 車検                              │ │ │
│ │ │ ステータス: 作業中                             │ │ │
│ │ │ [作業を開始 >] ボタン                          │ │ │
│ │ └────────────────────────────────────────────────┘ │ │
│ │ ┌────────────────────────────────────────────────┐ │ │
│ │ │ 作業カード2: 板金・塗装                        │ │ │
│ │ │ ステータス: 外注調整中                         │ │ │
│ │ │ [診断を開始] ボタン                            │ │ │
│ │ └────────────────────────────────────────────────┘ │ │
│ │ (スクロール可能)                                   │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

---

## 仕様詳細

### 1. 上部セクション（顧客情報・車両情報 + 車両画像）

**レイアウト**: 横並び（Flexbox）
- **左側**: 車両画像（固定幅、例：240px）
- **中央**: 顧客情報・車両情報（可変幅）
- **右側**: ステータスバッジ + 受付/引渡しボタン（固定幅、例：200px）

**表示内容**:
- **左側（車両画像）**:
  - 車両写真（またはメーカーアイコン）
  - 写真枚数バッジ（該当する場合）

- **中央（顧客情報・車両情報）**:
  - 顧客名（クリック可能: 顧客詳細ダイアログ）
  - 車両情報（クリック可能: 車両詳細ダイアログ）
  - サービス種類バッジ
  - 入庫日時、タグ、担当者、代車情報
  - 承認済み作業内容ボタン
  - 受付メモ追加ボタン
  - 顧客向けリンク（事前問診、見積承認）
  - 変更申請アラート（該当する場合）

- **右側（ステータス + アクション）**:
  - ステータスバッジ（例: 出庫待ち）
  - 受付開始ボタン（入庫待ちの場合のみ）
  - 引渡しを開始ボタン（出庫待ちの場合のみ）

**特徴**:
- 固定表示（スクロールしない）
- 車両画像は上部セクション内のみに表示

---

### 2. 下部セクション（作業カード一覧）

**レイアウト**: 全幅

**表示内容**:
- 作業カード一覧（単発作業でも表示）
- 各作業カードには以下を表示:
  - 作業名（例: 車検、板金・塗装）
  - ステータス（例: 作業中、診断中、外注調整中）
  - アクションボタン（例: 作業を開始、診断を開始）

**特徴**:
- スクロール可能（`max-height`を設定）
- 作業が増えても画面が拡大しない
- 各作業カードは独立して操作可能
- 上部セクションとは視覚的に分離（ボーダーなど）

---

## 実装方針

### レイアウト構造の変更

1. **ジョブカード全体を2つのセクションに分割**:
   ```tsx
   <div className="bg-white rounded-xl border border-slate-200 mb-4 overflow-hidden">
     {/* 上部セクション: 車両画像 + 顧客情報 + 右上アクション */}
     <div className="flex border-b border-slate-200">
       {/* 左側: 車両画像 */}
       <div className="w-[240px] flex-shrink-0">
         {/* 車両画像 */}
       </div>
       
       {/* 中央: 顧客情報・車両情報 */}
       <div className="flex-1 p-4 lg:p-5">
         {/* 顧客名、車両情報、各種ボタン、アラート */}
       </div>
       
       {/* 右側: ステータス + アクション */}
       <div className="w-[200px] flex-shrink-0 p-4 border-l border-slate-200">
         {/* ステータスバッジ、受付/引渡しボタン */}
       </div>
     </div>
     
     {/* 下部セクション: 作業カード一覧 */}
     <div className="p-4">
       <div className="max-h-[400px] overflow-y-auto">
         {/* 作業カード一覧 */}
       </div>
     </div>
   </div>
   ```

2. **右上セクションの条件付き表示**:
   - 受付開始（入庫待ち）または引渡し（出庫待ち）の場合のみ表示
   - それ以外の場合は非表示（またはステータスバッジのみ表示）

3. **作業カードのアクションボタン**:
   - 各作業カード内に表示
   - ステータスに応じた適切なボタンを表示

---

## 確認事項

1. **ステータスバッジの位置**:
   - 右上セクションに配置する
   - 受付/引渡しボタンの上に表示

2. **上部セクションと下部セクションの分離**:
   - ボーダーで視覚的に分離する（`border-b`）

3. **スクロール領域の高さ**:
   - `max-h-[400px]`で問題ないか？
   - レスポンシブ対応はどうするか？

4. **レスポンシブ対応**:
   - モバイルでは上部セクションを縦に並べる
   - デスクトップでは横に並べる

---

## 実装チェックリスト

- [ ] ジョブカード全体を2つのセクションに分割
- [ ] 上部セクション: 車両画像 + 顧客情報 + 右上アクション
- [ ] 下部セクション: 作業カード一覧（全幅、スクロール可能）
- [ ] 右上セクション: ステータスバッジ + 受付/引渡しボタン
- [ ] 作業カード内にアクションボタンを表示
- [ ] 視覚的な分離（ボーダー）を追加
- [ ] レスポンシブ対応を確認


