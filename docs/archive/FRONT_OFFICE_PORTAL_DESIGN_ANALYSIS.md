# フロントオフィス向けポータル画面：設計分析と改善提案

## 現状の設計分析

### 現在のレイアウト構造

```
┌─────────────────────────────────────────┐
│ ヘッダー（ロゴ + 日時 + リフレッシュ）   │
├─────────────────────────────────────────┤
│ サマリーカード（3つ横並び）              │
│ - 本日の状況（ステータス別件数）         │
│ - スマートタグ在庫                      │
│ - 代車在庫                              │
├─────────────────────────────────────────┤
│ 検索バー                                │
├─────────────────────────────────────────┤
│ 入庫区分フィルター（横並びボタン）       │
├─────────────────────────────────────────┤
│ 案件リスト（カード形式、時系列順）       │
│ ┌─────────┐ ┌─────────┐              │
│ │ 案件1   │ │ 案件2   │              │
│ │ ステータス│ │ ステータス│            │
│ └─────────┘ └─────────┘              │
└─────────────────────────────────────────┘
```

### 現状の課題

フロントオフィススタッフの主なニーズに対して：

1. **「今日何の車両が入るのかな？」**
   - ❌ 入庫予定時間順に並んでいるが、入庫待ちの案件が埋もれやすい
   - ❌ 入庫予定時間が明確に表示されていない（カード内の小さなテキスト）
   - ❌ 入庫待ちの案件を素早く見つけるのが困難

2. **「今あるあの車両はどんな状況なのかな？」**
   - ⚠️ ステータス別にフィルタリングできない（入庫区分のみ）
   - ⚠️ ステータス別にグループ化して表示できない
   - ⚠️ 特定のステータスの案件を探すのに時間がかかる

3. **「全体を見れるようにしたほうがいいのか？」**
   - ⚠️ 現在は時系列順のみで、全体像を把握しにくい
   - ⚠️ ステータス別の全体像が見えない
   - ⚠️ 緊急度の高い案件が埋もれやすい

---

## フロントオフィス業務フローの分析

### 典型的な1日の業務フロー

1. **朝の準備（8:00-9:00）**
   - 「今日は何台入るのかな？」→ 入庫予定の確認
   - 「昨日から残っている案件は？」→ 未完了案件の確認

2. **受付業務（9:00-17:00）**
   - 「入庫待ちの案件はどれ？」→ 受付が必要な案件の確認
   - 「診断待ちの案件は？」→ 整備士に確認が必要な案件
   - 「見積作成待ちの案件は？」→ 見積作成が必要な案件

3. **状況確認（随時）**
   - 「田中様の車は今どんな状況？」→ 特定顧客の案件検索
   - 「作業待ちの案件は？」→ 作業開始待ちの案件確認

### 必要な情報アクセスパターン

1. **ステータス別アクセス**: 「入庫待ち」「診断待ち」「見積作成待ち」など
2. **時系列アクセス**: 「今日入る予定」「今入庫したばかり」など
3. **顧客・車両検索**: 「田中様」「BMW X3」など
4. **緊急度別アクセス**: 「対応が必要」「長時間待機中」など

---

## 改善提案

### 推奨案A: ステータス別クイックフィルタ + グループ表示オプション ⭐ **最推奨**

#### レイアウト構造

```
┌─────────────────────────────────────────┐
│ ヘッダー（ロゴ + 日時 + リフレッシュ）   │
├─────────────────────────────────────────┤
│ サマリーカード（3つ横並び）              │
│ - 本日の状況（ステータス別件数）         │
│ - スマートタグ在庫                      │
│ - 代車在庫                              │
├─────────────────────────────────────────┤
│ 【新規】ステータス別クイックフィルタ     │
│ [すべて] [入庫待ち] [診断待ち]          │
│ [見積作成待ち] [作業待ち] [引渡待ち]    │
├─────────────────────────────────────────┤
│ 検索バー                                │
├─────────────────────────────────────────┤
│ 入庫区分フィルター（ドロップダウン）     │
├─────────────────────────────────────────┤
│ 【新規】表示切替ボタン                  │
│ [時系列表示] [ステータス別表示]         │
├─────────────────────────────────────────┤
│ 案件リスト                               │
│ ┌─────────┐ ┌─────────┐              │
│ │ 案件1   │ │ 案件2   │              │
│ └─────────┘ └─────────┘              │
└─────────────────────────────────────────┘
```

#### 実装内容

1. **ステータス別クイックフィルタ**
   - サマリーカードの下に配置
   - 主要ステータス（入庫待ち、診断待ち、見積作成待ち、作業待ち、引渡待ち）をボタン形式で表示
   - クリックで該当ステータスの案件のみ表示
   - 選択中のステータスは視覚的に強調（背景色＋白テキスト）
   - 件数をバッジで表示（例: 「入庫待ち (6)」）

2. **表示切替オプション**
   - 「時系列表示」（デフォルト）: 入庫予定時間順
   - 「ステータス別表示」: ステータスごとにグループ化して表示
     - 各ステータスグループにヘッダーを表示
     - グループ内は時系列順

3. **案件カードの改善**
   - 入庫予定時間をより強調（大きなフォント、色分け）
   - ステータスバッジをカード右上に配置（より目立つ位置）
   - 緊急度の高い案件（入庫待ち、長時間診断待ち）は視覚的に強調

**メリット**:
- ✅ 「今日何の車両が入るのか」を素早く把握できる
- ✅ 「今ある車両はどんな状況なのか」をステータス別に確認できる
- ✅ 全体像と詳細の両方を把握できる
- ✅ フロントオフィスの業務フローに最適化

---

### 推奨案B: タブ型レイアウト

#### レイアウト構造

```
┌─────────────────────────────────────────┐
│ ヘッダー                                 │
├─────────────────────────────────────────┤
│ サマリーカード                           │
├─────────────────────────────────────────┤
│ 【新規】ステータスタブ                   │
│ [すべて] [入庫待ち] [診断待ち]          │
│ [見積作成待ち] [作業待ち] [引渡待ち]    │
├─────────────────────────────────────────┤
│ 検索バー + 入庫区分フィルター             │
├─────────────────────────────────────────┤
│ タブに応じた案件リスト                   │
└─────────────────────────────────────────┘
```

**メリット**:
- ✅ ステータス別の切り替えが明確
- ✅ 各タブで独立したビューを提供

**デメリット**:
- ⚠️ 複数のステータスを同時に見ることができない
- ⚠️ 全体像の把握が難しい

---

### 推奨案C: ダッシュボード型レイアウト

#### レイアウト構造

```
┌─────────────────────────────────────────┐
│ ヘッダー                                 │
├─────────────────────────────────────────┤
│ サマリーカード（拡張版）                 │
│ - 本日の状況（詳細グラフ）               │
│ - 緊急案件アラート                       │
├─────────────────────────────────────────┤
│ 【新規】ステータス別セクション           │
│ ┌─────────────────┐                    │
│ │ 入庫待ち (6件)  │                    │
│ │ ┌───┐ ┌───┐  │                    │
│ │ │案件│ │案件│  │                    │
│ │ └───┘ └───┘  │                    │
│ └─────────────────┘                    │
│ ┌─────────────────┐                    │
│ │ 診断待ち (2件)  │                    │
│ │ ┌───┐ ┌───┐  │                    │
│ │ │案件│ │案件│  │                    │
│ │ └───┘ └───┘  │                    │
│ └─────────────────┘                    │
└─────────────────────────────────────────┘
```

**メリット**:
- ✅ 全体像を一目で把握できる
- ✅ 各ステータスの状況が明確

**デメリット**:
- ⚠️ 画面が縦に長くなる
- ⚠️ スクロールが多くなる
- ⚠️ モバイル表示では使いにくい

---

## 最終推奨

### **推奨: 案A（ステータス別クイックフィルタ + グループ表示オプション）**

#### 理由

1. **フロントオフィスの業務フローに最適**
   - 「今日何の車両が入るのか」→ 入庫待ちフィルタで即座に確認
   - 「今ある車両はどんな状況なのか」→ ステータス別表示で全体像を把握
   - 「特定の案件を探す」→ 検索バーで素早く検索

2. **柔軟性と使いやすさのバランス**
   - 時系列表示: 入庫予定時間を重視する場合
   - ステータス別表示: 全体像を把握したい場合
   - クイックフィルタ: 特定ステータスの案件のみを素早く確認

3. **段階的な導入が可能**
   - Phase 1: クイックフィルタの追加（即座に実装可能）
   - Phase 2: グループ表示オプションの追加
   - Phase 3: 緊急案件のハイライト

4. **モバイル対応**
   - クイックフィルタは横スクロール可能なチップバー
   - グループ表示は折りたたみ可能

---

## 実装詳細

### Phase 1: ステータス別クイックフィルタ（即座に実装可能）

```tsx
// ステータス別クイックフィルタコンポーネント
<StatusQuickFilter
  selectedStatus={selectedStatus}
  onSelect={setSelectedStatus}
  statusCounts={statusCounts} // 各ステータスの件数
/>

// フィルタリングロジック
const filteredJobs = jobs?.filter((job) => {
  // ステータスフィルター
  if (selectedStatus !== "すべて") {
    if (job.field5 !== selectedStatus) return false;
  }
  // 既存のフィルター（入庫区分、検索）も適用
  // ...
}) ?? [];
```

**ステータス定義**:
- `すべて`: すべての案件を表示
- `入庫待ち`: `field5 === "入庫待ち"`
- `診断待ち`: `field5 === "入庫済み"`
- `見積作成待ち`: `field5 === "見積作成待ち"`
- `作業待ち`: `field5 === "作業待ち"`
- `引渡待ち`: `field5 === "出庫待ち"`

### Phase 2: グループ表示オプション

```tsx
// 表示モードの切り替え
const [viewMode, setViewMode] = useState<"timeline" | "grouped">("timeline");

// グループ表示の場合
if (viewMode === "grouped") {
  const groupedJobs = filteredJobs.reduce((acc, job) => {
    const status = job.field5;
    if (!acc[status]) acc[status] = [];
    acc[status].push(job);
    return acc;
  }, {} as Record<string, ZohoJob[]>);

  return (
    <div className="space-y-6">
      {STATUS_ORDER.map((status) => (
        groupedJobs[status] && (
          <div key={status}>
            <h3 className="text-lg font-semibold mb-3">
              {status} ({groupedJobs[status].length}件)
            </h3>
            <div className="space-y-4">
              {groupedJobs[status].map((job) => (
                <JobCard key={job.id} job={job} ... />
              ))}
            </div>
          </div>
        )
      ))}
    </div>
  );
}
```

### Phase 3: 緊急案件のハイライト

```tsx
// 緊急度の判定
const getUrgencyLevel = (job: ZohoJob): "high" | "medium" | "low" => {
  if (job.field5 === "入庫待ち") return "high";
  if (job.field5 === "入庫済み") {
    // 診断待ちが長時間の場合
    const hoursSinceCheckIn = /* 計算 */;
    if (hoursSinceCheckIn > 2) return "high";
    return "medium";
  }
  return "low";
};

// カードに緊急度に応じたスタイルを適用
<Card className={cn(
  "transition-all hover:shadow-md",
  urgencyLevel === "high" && "border-l-4 border-l-yellow-500",
  urgencyLevel === "medium" && "border-l-4 border-l-orange-500"
)}>
```

---

## まとめ

### 現在の設計の評価

**良い点**:
- ✅ サマリーカードで全体像を把握できる
- ✅ 検索機能で特定案件を探せる
- ✅ カード形式で情報が整理されている

**改善が必要な点**:
- ❌ ステータス別のフィルタリングができない
- ❌ 全体像（ステータス別の整理）が見えない
- ❌ 入庫予定の案件が埋もれやすい

### 推奨する改善

**最優先（Phase 1）**:
1. **ステータス別クイックフィルタの追加**
   - 「今日何の車両が入るのか」を素早く確認
   - 「今ある車両はどんな状況なのか」をステータス別に確認

2. **入庫予定時間の強調**
   - カード内で入庫予定時間をより目立つ位置に配置
   - 色分けやアイコンで視覚的に強調

**次期改善（Phase 2）**:
3. **グループ表示オプション**
   - ステータス別にグループ化して表示
   - 全体像を把握しやすくする

**将来的な改善（Phase 3）**:
4. **緊急案件のハイライト**
   - 対応が必要な案件を視覚的に強調
   - 長時間待機中の案件をアラート表示

---

## 結論

**現在の設計は基本的な機能は揃っていますが、フロントオフィスの業務フローを考慮すると、ステータス別のクイックフィルタとグループ表示オプションの追加が最も効果的です。**

これにより、「今日何の車両が入るのか」「今ある車両はどんな状況なのか」を素早く把握できるようになり、フロントオフィススタッフの業務効率が大幅に向上します。

**全体を見れるようにする必要はありますが、現在の一覧表示に加えて、ステータス別の整理表示をオプションとして提供するのが最適です。** これにより、時系列での確認とステータス別での全体像把握の両方が可能になります。


























