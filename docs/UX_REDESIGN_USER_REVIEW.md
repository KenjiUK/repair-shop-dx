# UI/UX再設計提案 - ユーザー目線でのレビュー

## 整備工場の実際の業務シーンを想定したレビュー

### シナリオ1: 朝のミーティング後の作業開始

**実際の業務フロー:**
1. 朝のミーティングで「今日の作業」を確認
2. トップページ（ジョブカード一覧）を開く
3. 自分の担当作業を探す
4. 担当作業のジョブカードをクリック
5. 診断画面で作業を開始

**現在の提案での問題点:**
- ❌ 複合作業の場合、ジョブカード内に作業カードが表示される
- ❌ しかし、ジョブカードが大きくなりすぎる可能性がある
- ❌ トップページで一覧を見る際に、情報が多すぎて見づらい

**改善案:**
- ジョブカードはコンパクトに保ち、複合作業の場合は「2件の作業」と表示
- クリックしたら、作業カード一覧を表示（モーダルまたは展開）
- または、ジョブカードを展開可能にする

---

### シナリオ2: 複数のスタッフが同時に作業する場合

**実際の業務フロー:**
1. スタッフA: オイル交換を担当
2. スタッフB: 車検を担当
3. それぞれが自分の作業を進める

**現在の提案:**
- ✅ ジョブカード内に各作業カードが表示される
- ✅ 各作業カードに「診断を開始」ボタンがある
- ✅ スタッフAは「オイル交換」のボタンをクリック
- ✅ スタッフBは「車検」のボタンをクリック

**問題点:**
- ⚠️ ジョブカードが大きくなりすぎる可能性がある
- ⚠️ トップページで一覧を見る際に、スクロールが多くなる

**改善案:**
- ジョブカードは基本情報のみ表示
- クリックしたら、作業カード一覧を表示（モーダルまたは展開）
- または、ジョブカードを展開可能にする

---

### シナリオ3: 作業途中で追加作業が発生した場合

**実際の業務フロー:**
1. オイル交換の診断中に「ブレーキパッドの交換も必要」と発見
2. 追加作業を追加
3. ジョブカードに新しい作業カードが表示される

**現在の提案:**
- ✅ 追加作業が追加されると、ジョブカードに新しい作業カードが表示される
- ✅ 各スタッフが自分の作業を選べる

**問題点:**
- ⚠️ ジョブカードが動的に大きくなる
- ⚠️ トップページで一覧を見る際に、レイアウトが崩れる可能性がある

**改善案:**
- ジョブカードは基本情報のみ表示
- 作業カードは展開可能にする
- または、別画面（モーダル）で表示

---

## ユーザー目線での問題点

### 1. ジョブカードが大きくなりすぎる ⚠️ 重要

**問題:**
- 複合作業の場合、ジョブカード内に複数の作業カードを表示すると、カードが大きくなる
- トップページで一覧を見る際に、スクロールが多くなる
- 情報が多すぎて、見づらくなる

**影響:**
- トップページで一覧を見る際の効率が下がる
- 重要な情報（顧客名、車両情報、ステータス）が見づらくなる

**改善案:**
- **案1: ジョブカードを展開可能にする**
  - デフォルトは基本情報のみ表示
  - クリックしたら、作業カード一覧を展開
  - 各作業カードに「診断を開始」ボタン

- **案2: モーダルで作業カード一覧を表示**
  - ジョブカードをクリックしたら、モーダルで作業カード一覧を表示
  - 各作業カードに「診断を開始」ボタン
  - モーダルを閉じずに、直接診断画面に遷移

- **案3: ジョブカードに「作業一覧」ボタンを追加**
  - ジョブカードに「作業一覧」ボタンを追加
  - クリックしたら、作業カード一覧を表示（モーダルまたは展開）
  - 各作業カードに「診断を開始」ボタン

---

### 2. 単体作業と複合作業でUIが異なる ⚠️ 中

**問題:**
- 単体作業: ジョブカードに直接「診断を開始」ボタン
- 複合作業: ジョブカード内に作業カード一覧 → 各作業カードに「診断を開始」ボタン
- UIが一貫していない

**影響:**
- ユーザーが混乱する可能性がある
- 学習コストが増える

**改善案:**
- **案1: 単体作業も作業カードとして表示**
  - 単体作業の場合も、1つの作業カードとして表示
  - UIを統一する

- **案2: 単体作業は現在のUIを維持**
  - 単体作業の場合は、現在のUIを維持
  - 複合作業の場合のみ、作業カード一覧を表示
  - ただし、UIの一貫性を保つ

---

### 3. 担当者情報の表示 ⚠️ 中

**問題:**
- 各作業カードに担当者情報を表示する提案
- しかし、担当者情報が設定されていない場合もある

**影響:**
- 担当者情報がない場合、どのスタッフが作業すべきか分からない
- 担当者を割り当てる機能が必要

**改善案:**
- 担当者情報がない場合、「未割り当て」と表示
- 担当者を割り当てる機能を追加
- または、診断画面で担当者を設定

---

### 4. 作業の進捗状況の表示 ⚠️ 中

**問題:**
- 各作業カードにステータスを表示する提案
- しかし、ステータスが多すぎると見づらくなる

**影響:**
- 情報が多すぎて、見づらくなる
- 重要な情報（どの作業が完了しているか）が見づらくなる

**改善案:**
- ステータスを簡略化する
- 完了/未完了のみ表示
- 詳細なステータスは診断画面で確認

---

## 推奨される改善案

### 案1: ジョブカードを展開可能にする（最推奨）

**UI設計:**
```
┌─────────────────────────────────────────┐
│ ジョブカード（基本情報）                 │
│ - 顧客名、車両情報、ステータス          │
│ - [展開] ボタン（複合作業の場合）       │
└─────────────────────────────────────────┘
  ↓ クリック
┌─────────────────────────────────────────┐
│ ジョブカード（展開後）                   │
│ - 基本情報                              │
│ - 作業カード1: 車検 [診断を開始]        │
│ - 作業カード2: オイル交換 [診断を開始]  │
└─────────────────────────────────────────┘
```

**メリット:**
- ✅ トップページで一覧を見る際に、コンパクトに表示される
- ✅ 必要な時だけ展開できる
- ✅ 単体作業の場合は展開不要（現在のUIを維持）

**デメリット:**
- ❌ 展開する操作が必要（ただし、1クリックで済む）

---

### 案2: モーダルで作業カード一覧を表示

**UI設計:**
```
┌─────────────────────────────────────────┐
│ ジョブカード（基本情報）                 │
│ - 顧客名、車両情報、ステータス          │
│ - [作業を選択] ボタン（複合作業の場合） │
└─────────────────────────────────────────┘
  ↓ クリック
┌─────────────────────────────────────────┐
│ モーダル: 作業カード一覧                 │
│ - 作業カード1: 車検 [診断を開始]        │
│ - 作業カード2: オイル交換 [診断を開始]  │
└─────────────────────────────────────────┘
```

**メリット:**
- ✅ トップページで一覧を見る際に、コンパクトに表示される
- ✅ モーダルで作業カード一覧を表示できる
- ✅ 単体作業の場合はモーダル不要（直接診断画面に遷移）

**デメリット:**
- ❌ モーダルを開く操作が必要（ただし、1クリックで済む）

---

### 案3: ジョブカードに「作業数」バッジを表示

**UI設計:**
```
┌─────────────────────────────────────────┐
│ ジョブカード（基本情報）                 │
│ - 顧客名、車両情報、ステータス          │
│ - [作業: 2件] バッジ（複合作業の場合）  │
│ - [診断を開始] ボタン                   │
└─────────────────────────────────────────┘
  ↓ クリック（複合作業の場合）
┌─────────────────────────────────────────┐
│ 作業選択画面（またはモーダル）           │
│ - 作業カード1: 車検 [診断を開始]        │
│ - 作業カード2: オイル交換 [診断を開始]  │
└─────────────────────────────────────────┘
```

**メリット:**
- ✅ トップページで一覧を見る際に、コンパクトに表示される
- ✅ 複合作業であることが一目で分かる
- ✅ 単体作業の場合は直接診断画面に遷移

**デメリット:**
- ❌ 作業選択画面（またはモーダル）を開く操作が必要

---

## 最終推奨案

### 案1: ジョブカードを展開可能にする（最推奨）

**理由:**
1. **トップページでの一覧性**
   - デフォルトはコンパクトに表示される
   - 必要な時だけ展開できる

2. **ユーザー体験**
   - 展開する操作は1クリックで済む
   - 単体作業の場合は展開不要（現在のUIを維持）

3. **実装の容易さ**
   - 既存のジョブカードを拡張するだけ
   - 選択画面を削除できる

**実装イメージ:**
```typescript
// ジョブカード内
{workOrders && workOrders.length > 1 ? (
  <Collapsible>
    <CollapsibleTrigger>
      <Button>作業一覧を表示 ({workOrders.length}件)</Button>
    </CollapsibleTrigger>
    <CollapsibleContent>
      {workOrders.map((wo) => (
        <WorkOrderCard
          key={wo.id}
          workOrder={wo}
          onStartDiagnosis={() => router.push(`/mechanic/diagnosis/${jobId}?workOrder=${wo.id}`)}
        />
      ))}
    </CollapsibleContent>
  </Collapsible>
) : (
  <Button onClick={() => router.push(`/mechanic/diagnosis/${jobId}`)}>
    診断を開始
  </Button>
)}
```

---

## まとめ

**現在の提案の問題点:**
- ジョブカードが大きくなりすぎる
- トップページで一覧を見る際に、情報が多すぎる

**推奨される改善:**
- **ジョブカードを展開可能にする**
- デフォルトは基本情報のみ表示
- クリックしたら、作業カード一覧を展開
- 各作業カードに「診断を開始」ボタン

**メリット:**
- トップページでの一覧性が保たれる
- 必要な時だけ詳細を表示できる
- 単体作業の場合は現在のUIを維持できる

