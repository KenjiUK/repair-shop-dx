# テスト計画とドキュメント整備ガイド

## 📋 現在の実装状況

### ✅ 実装済み
- 基本的な機能はすべて実装済み
- メール同意更新処理 ✅
- Googleレビューリンク ✅
- アンケート機能 ✅

### ⚠️ 未実装機能（テスト前に確認が必要）

#### 優先度: 高
1. **見積プレビュー機能** - アドバイザーが顧客に送る前に確認する必要がある
2. **メール送信機能** - 法人客への見積もり送信に必要

#### 優先度: 中
3. **見積もりページのURL発行（マジックリンク）** - セキュリティ面での確認が必要
4. **メカニックからのコメント表示** - レポート画面の機能拡張

#### 優先度: 低
5. **自動フォローメール機能** - 不要（仕様書には残すが実装しない）
6. **Googleレビューリンク** - ✅ 実装済み

---

## 🧪 テスト計画

### テストの種類

#### 1. 単体テスト（Unit Test）
- **タイミング**: 実装中・実装直後
- **対象**: 個別の関数・コンポーネント
- **現在の状況**: 未実装（Next.jsプロジェクトではJest + React Testing Library推奨）

#### 2. 結合テスト（Integration Test）
- **タイミング**: 機能実装完了後
- **対象**: コンポーネント間の連携、API連携
- **現在の状況**: 未実装

#### 3. E2Eテスト（End-to-End Test）
- **タイミング**: 機能実装完了後、リリース前
- **対象**: ユーザーシナリオ全体
- **現在の状況**: 未実装（Playwright推奨）

#### 4. 手動テスト（Manual Test）
- **タイミング**: 実装完了後、リリース前
- **対象**: 全機能の動作確認
- **推奨**: テストチェックリストの作成

---

## 📚 ドキュメント整備のタイミング

### 一般的なソフトウェア開発プロセスにおけるドキュメント整備

```
実装 → テスト → ドキュメント整備 → リリース
```

### ドキュメントの種類と整備タイミング

#### ✅ **実装と同時（継続的に更新）**

1. **コードコメント・JSDoc**
   - **タイミング**: 実装と同時
   - **理由**: コードを理解するために必要
   - **現在の状況**: 一部実装済み（改善の余地あり）

2. **API仕様書・型定義**
   - **タイミング**: API実装と同時
   - **理由**: フロントエンド・バックエンドの連携に必要
   - **現在の状況**: TypeScript型定義は実装済み

3. **技術仕様書（SPECIFICATION.md）**
   - **タイミング**: 実装前・実装中に更新
   - **理由**: 開発方針の明確化、仕様変更の記録
   - **現在の状況**: ✅ 実装済み

#### 📝 **テスト完了後（機能が確定してから）**

4. **ユーザーマニュアル・操作ガイド**
   - **タイミング**: テスト完了後（機能が確定してから）
   - **理由**: 
     - 機能が変更される可能性がある
     - 実際の動作を確認してから書く方が正確
     - テストで発見した使用方法を反映できる
   - **内容**:
     - スタッフ向け操作マニュアル
     - 顧客向け操作ガイド
     - よくある質問（FAQ）

5. **運用マニュアル**
   - **タイミング**: テスト完了後
   - **理由**: 本番環境での動作を確認してから作成
   - **内容**:
     - デプロイ手順
     - 環境変数設定
     - トラブルシューティング
     - バックアップ・復旧手順

6. **変更履歴・リリースノート**
   - **タイミング**: テスト完了後、リリース前
   - **理由**: 確定した変更内容を記録
   - **現在の状況**: CHANGELOG.md が存在（更新が必要）

#### 🔄 **テストと並行（推奨）**

7. **テストドキュメント**
   - **タイミング**: テスト計画は実装前、テスト結果はテスト中
   - **内容**:
     - テスト計画書
     - テストケース一覧
     - テスト結果レポート
     - バグレポート

---

## 🎯 推奨アプローチ（このプロジェクトの場合）

### Phase 1: 実装完了確認
- [ ] 未実装機能の確認（見積プレビュー、メール送信など）
- [ ] 実装済み機能の動作確認（基本的な手動テスト）
- [ ] コードレビュー（既存コードの品質確認）

### Phase 2: テスト実行
- [ ] テスト計画書の作成
- [ ] テストケース一覧の作成
- [ ] 手動テストの実行
  - 各フェーズ（Phase 0〜6）のシナリオテスト
  - エッジケースのテスト
  - ブラウザ互換性テスト（Chrome, Safari, Firefox）
  - モバイル・タブレット対応テスト
- [ ] バグレポートの作成と修正

### Phase 3: ドキュメント整備（テスト完了後）
- [ ] **ユーザーマニュアル**
  - スタッフ向け操作マニュアル
  - 顧客向け操作ガイド（事前チェックイン、見積承認など）
- [ ] **運用マニュアル**
  - デプロイ手順（Vercel）
  - 環境変数設定
  - Zoho CRM連携設定
  - Google Drive設定
  - トラブルシューティング
- [ ] **変更履歴の更新**
  - CHANGELOG.md の更新
  - リリースノートの作成

### Phase 4: リリース準備
- [ ] 最終確認
- [ ] ドキュメントの最終レビュー
- [ ] リリース

---

## 📖 作成すべきドキュメント一覧

### ユーザー向けドキュメント
1. **スタッフ向け操作マニュアル**
   - 受付画面の使い方
   - 診断画面の使い方
   - 見積作成画面の使い方
   - 作業画面の使い方
   - よくある質問（FAQ）

2. **顧客向け操作ガイド**
   - 事前チェックインの入力方法
   - 見積承認画面の使い方
   - レポート画面の確認方法

### 運用向けドキュメント
3. **運用マニュアル**
   - デプロイ手順
   - 環境変数一覧と設定方法
   - 外部サービス連携設定（Zoho CRM, Google Drive, Google Sheets）
   - トラブルシューティング
   - バックアップ・復旧手順

4. **開発者向けドキュメント**
   - 開発環境セットアップ
   - コードベース構造
   - 主要コンポーネントの説明
   - API仕様書

---

## ⚠️ 注意点

### ドキュメントをテスト後に整備する理由

1. **機能の確定**
   - テスト中にバグが見つかり、機能が変更される可能性がある
   - テスト完了後に確定した機能について記述する方が正確

2. **実際の動作の確認**
   - 実装した機能が想定通りに動作するか確認してから記述
   - テストで発見した使用方法や注意点を反映

3. **効率性**
   - 機能が確定する前に書くと、変更のたびに更新が必要
   - 確定後なら一度だけ書けば良い

4. **品質**
   - 実際に動作を確認してから書く方が、より正確で実用的なドキュメントになる

### 例外：実装と同時に整備すべきドキュメント

- **コードコメント**: コードを理解するために必要
- **API仕様書**: 他の開発者が使用するため
- **技術仕様書**: 開発方針の明確化のため

---

## 🚀 次のステップ

### 今すぐ実施すべきこと

1. **未実装機能の確認**
   - 見積プレビュー機能の実装が必要か確認
   - メール送信機能の実装が必要か確認

2. **基本的な手動テスト**
   - 主要機能の動作確認
   - エラーの有無の確認

3. **テスト計画書の作成**
   - テストシナリオの洗い出し
   - テストケース一覧の作成

### テスト完了後に実施すべきこと

1. **ユーザーマニュアルの作成**
2. **運用マニュアルの作成**
3. **変更履歴の更新**




