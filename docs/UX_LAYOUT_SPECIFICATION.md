# UXレイアウト仕様書 - カードセクション分割

## 現在の理解

画像を確認した結果、以下のレイアウト構造を理解しました：

### レイアウト構造

```
┌─────────────────────────────────────────────────────────┐
│ ジョブカード全体                                        │
│                                                         │
│ ┌──────────────┐ ┌──────────────────────────────────┐ │
│ │              │ │ 【上部セクション】                │ │
│ │  車両画像    │ │ ┌──────────────────────────────┐ │ │
│ │  (固定)      │ │ │ 顧客名: 山田 雄一            │ │ │
│ │              │ │ │ 車両: ポルシェ 911 / ...      │ │ │
│ │              │ │ │ サービス: 車検               │ │ │
│ │              │ │ │ 入庫日時、タグ、担当者        │ │ │
│ │              │ │ │ 承認済み作業内容ボタン       │ │ │
│ │              │ │ │ 受付メモ追加ボタン           │ │ │
│ │              │ │ │ 顧客向けリンク               │ │ │
│ │              │ │ │ 変更申請アラート             │ │ │
│ │              │ │ └──────────────────────────────┘ │ │
│ │              │ │                                  │ │
│ │              │ │ ┌──────────────────────────────┐ │ │
│ │              │ │ │ 【下部セクション】            │ │ │
│ │              │ │ │ ┌──────────────────────────┐ │ │ │
│ │              │ │ │ │ 作業カード1: 車検         │ │ │ │
│ │              │ │ │ │ ステータス: 作業中        │ │ │ │
│ │              │ │ │ │ [作業を開始 >] ボタン     │ │ │ │
│ │              │ │ │ └──────────────────────────┘ │ │ │
│ │              │ │ │ ┌──────────────────────────┐ │ │ │
│ │              │ │ │ │ 作業カード2: 板金・塗装  │ │ │ │
│ │              │ │ │ │ ステータス: 外注調整中    │ │ │ │
│ │              │ │ │ │ [診断を開始] ボタン      │ │ │ │
│ │              │ │ │ └──────────────────────────┘ │ │ │
│ │              │ │ │ (スクロール可能)            │ │ │
│ │              │ │ └──────────────────────────────┘ │ │
│ │              │ └──────────────────────────────────┘ │
│ │              │ ┌──────────────────────────────────┐ │
│ │              │ │ 【右上セクション】              │ │
│ │              │ │ ステータスバッジ: 出庫待ち      │ │
│ │              │ │ [引渡しを開始] ボタン          │ │
│ │              │ │ (受付開始/引渡しのみ)          │ │
│ │              │ └──────────────────────────────────┘ │
│ └──────────────┘                                      │
└─────────────────────────────────────────────────────────┘
```

---

## 仕様詳細

### 1. 上部セクション（顧客情報・車両情報）

**配置位置**: メインセクションの上部、作業カードの上

**表示内容**:
- 顧客名（クリック可能: 顧客詳細ダイアログ）
- 車両情報（クリック可能: 車両詳細ダイアログ）
- サービス種類バッジ
- 入庫日時、タグ、担当者、代車情報
- 承認済み作業内容ボタン
- 受付メモ追加ボタン
- 顧客向けリンク（事前問診、見積承認）
- 変更申請アラート（該当する場合）

**特徴**:
- 固定表示（スクロールしない）
- 作業カードとは視覚的に分離（ボーダーなど）

---

### 2. 下部セクション（作業カード一覧）

**配置位置**: メインセクションの下部、顧客情報の下

**表示内容**:
- 作業カード一覧（単発作業でも表示）
- 各作業カードには以下を表示:
  - 作業名（例: 車検、板金・塗装）
  - ステータス（例: 作業中、診断中、外注調整中）
  - アクションボタン（例: 作業を開始、診断を開始）

**特徴**:
- スクロール可能（`max-height`を設定）
- 作業が増えても画面が拡大しない
- 各作業カードは独立して操作可能

---

### 3. 右上セクション（車両単位の操作）

**配置位置**: メインセクションの右側、固定幅200px

**表示内容**:
- **受付開始ボタン**（入庫待ちの場合のみ）
- **引渡しを開始ボタン**（出庫待ちの場合のみ）
- **ステータスバッジ**（現在はメインセクションの右上に表示されているが、ここに移動？）

**特徴**:
- 車両単位の操作のみ
- 作業単位の操作は表示しない
- 該当するボタンがない場合は非表示

---

## 実装方針

### レイアウト構造の変更

1. **メインセクションを2つのサブセクションに分割**:
   ```tsx
   <div className="flex-1 p-4 lg:p-5 flex flex-col">
     {/* 上部セクション: 顧客情報・車両情報 */}
     <div className="flex-shrink-0">
       {/* 顧客名、車両情報、各種ボタン、アラート */}
     </div>
     
     {/* 下部セクション: 作業カード一覧 */}
     <div className="flex-1 min-h-0 mt-4 pt-4 border-t border-slate-200">
       <div className="max-h-[400px] overflow-y-auto">
         {/* 作業カード一覧 */}
       </div>
     </div>
   </div>
   ```

2. **右上セクションの条件付き表示**:
   - 受付開始（入庫待ち）または引渡し（出庫待ち）の場合のみ表示
   - それ以外の場合は非表示

3. **作業カードのアクションボタン**:
   - 各作業カード内に表示
   - ステータスに応じた適切なボタンを表示

---

## 確認事項

1. **ステータスバッジの位置**:
   - 現在はメインセクションの右上に表示
   - 右上セクションに移動するか、現在の位置を維持するか？

2. **上部セクションと下部セクションの分離**:
   - ボーダーで視覚的に分離するか？
   - 背景色を変えるか？

3. **スクロール領域の高さ**:
   - `max-h-[400px]`で問題ないか？
   - レスポンシブ対応はどうするか？

---

## 実装チェックリスト

- [ ] メインセクションを2つのサブセクションに分割
- [ ] 上部セクション: 顧客情報・車両情報を固定表示
- [ ] 下部セクション: 作業カード一覧をスクロール可能に
- [ ] 右上セクション: 受付開始/引渡しボタンのみ表示
- [ ] 作業カード内にアクションボタンを表示
- [ ] 視覚的な分離（ボーダーなど）を追加
- [ ] レスポンシブ対応を確認


