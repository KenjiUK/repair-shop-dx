# CompactJobHeader レビュー結果

## レビュー日時
2025-01-XX

## 現在の実装状況

### ✅ 改善された点

1. **ページタイトルと作業情報の分離**
   - ページタイトル「12ヵ月点検作業」が別行で表示されている ✅
   - 「作業: 12ヵ月点検」が第3階層に配置され、タイトルとは分離されている ✅

2. **タグの配置**
   - タグが第2階層の最後に配置されている ✅
   - タグの色が`text-slate-600`で薄くなっている ✅

3. **情報階層の明確化**
   - 第1階層: 顧客名 + ステータスバッジ + 戻るボタン ✅
   - 第2階層: 車両情報、入庫区分、時間、タグ ✅
   - 第3階層: 現在の作業、担当整備士 ✅

---

## 改善提案

### 1. 情報の重複問題

**問題点**:
- 入庫区分バッジ「12ヵ月点検」と第3階層の「作業: 12ヵ月点検」が重複している
- ページタイトル「12ヵ月点検作業」と入庫区分「12ヵ月点検」も重複している

**提案**:
- 第3階層の「作業: 12ヵ月点検」は、入庫区分バッジと重複する場合は表示しない
- または、第3階層では「作業:」のプレフィックスを削除し、単に作業名のみを表示

### 2. タグの視覚的な優先順位

**問題点**:
- タグは第2階層の最後に配置されているが、まだ同じ行に表示されているため、視覚的には目立つ可能性がある
- タグの色は`text-slate-600`だが、さらに視覚的な優先順位を下げる必要があるかもしれない

**提案**:
- タグを第3階層に移動する（現在の作業、担当整備士と同じ階層）
- または、タグの色をさらに薄くする（`text-slate-500`または`text-slate-400`）
- または、タグを括弧で囲むなど、視覚的に控えめにする

### 3. 入庫区分バッジの必要性

**問題点**:
- ページタイトルに既に「12ヵ月点検作業」と表示されている
- 入庫区分バッジ「12ヵ月点検」は情報が重複している

**提案**:
- 入庫区分バッジは、ページタイトルと異なる場合のみ表示する
- または、入庫区分バッジを削除し、ページタイトルで十分とする

### 4. 第2階層の情報量

**問題点**:
- 第2階層に車両情報、入庫区分、時間、タグが全て表示されているため、情報量が多い
- モバイルでは折り返しが発生し、視認性が低下する可能性がある

**提案**:
- 第2階層を2行に分割する（車両情報 + 入庫区分 / 時間 + タグ）
- または、タグを第3階層に移動し、第2階層の情報量を減らす

---

## 推奨される改善案

### 案1: タグを第3階層に移動

**変更内容**:
- タグを第2階層から第3階層に移動
- 第2階層: 車両情報、入庫区分、時間
- 第3階層: 現在の作業、担当整備士、タグ

**メリット**:
- タグの視覚的な優先順位が明確に下がる
- 第2階層の情報量が減り、視認性が向上する

### 案2: 入庫区分バッジの条件付き表示

**変更内容**:
- 入庫区分バッジは、ページタイトルと異なる場合のみ表示
- または、複数の入庫区分がある場合のみ表示

**メリット**:
- 情報の重複を減らす
- ヘッダーがよりシンプルになる

### 案3: 第3階層の「作業:」プレフィックスを削除

**変更内容**:
- 第3階層の「作業: 12ヵ月点検」を「12ヵ月点検」のみに変更
- 入庫区分バッジと重複する場合は表示しない

**メリット**:
- 情報の重複を減らす
- よりシンプルな表示になる

---

## 優先度

1. **高**: 情報の重複問題の解決（案2または案3）
2. **中**: タグの視覚的な優先順位の改善（案1）
3. **低**: 第2階層の情報量の調整

---

## 実装完了

### 実装した改善内容

1. **タグを第3階層に移動** ✅
   - タグを第2階層から第3階層に移動
   - タグの色を`text-slate-500`に変更（さらに薄く）
   - タグアイコンの色を`text-slate-400`に変更

2. **情報の重複を解消** ✅
   - 入庫区分バッジ（`serviceKind`）と現在の作業名（`currentWorkOrderName`）が同じ場合は、現在の作業を非表示
   - 第3階層の「作業:」プレフィックスを削除し、作業名のみを表示

3. **第2階層の情報量を削減** ✅
   - 第2階層からタグを削除し、車両情報、入庫区分、時間のみに
   - 第2階層の視認性が向上

### 変更後の情報階層

- **第1階層**: 顧客名 + ステータスバッジ + 戻るボタン
- **第2階層**: 車両情報、入庫区分、時間
- **第3階層**: 現在の作業（重複しない場合）、担当整備士、タグ

### 実装ファイル

- `src/components/layout/compact-job-header.tsx`
- `docs/COMPACT_JOB_HEADER_DESIGN.md`



